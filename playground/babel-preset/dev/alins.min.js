var Alins=function(j){"use strict";function h(n){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function s(n,e,t){return(e=function(n){n=function(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0===t)return("string"===e?String:Number)(n);t=t.call(n,e||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(n,"string");return"symbol"==typeof n?n:String(n)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function R(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(n){l=!0,o=n}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(n,e)||c(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(n){return function(n){if(Array.isArray(n))return r(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||c(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e){if(n){if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Map"===(t="Object"===t&&n.constructor?n.constructor.name:t)||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,e):void 0}}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function y(n,e){var t,r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=c(n))||e&&n&&"number"==typeof n.length)return r&&(n=r),t=0,{s:e=function(){},n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}var _=/\(.*?\)/;function D(n){return n instanceof Array&&n.raw instanceof Array}n=navigator.userAgent;var n=/Safari/.test(n)&&!/Chrome/.test(n);var p=Symbol("t"),L=Symbol("u"),M=Symbol("c"),g=Symbol("e"),a=Symbol("t"),m=Symbol("pp");function b(t,n,r){return t[L].shallow?n:n.map(function(n,e){return n&&"object"===h(n)?O(n,{commonLns:t[L].commonLns,path:t[L].path,key:"".concat(r+e)}):n})}function A(n,e,t,r,o,i){null!=(n=n[a])&&n.forEach(function(n){n({type:e,data:r,index:t,count:o,fromAssign:i})})}function $(n,e){n[L].replaceLns=!1;e=e();return delete n[L].replaceLns,e}j.AlinsType=void 0,(e=j.AlinsType||(j.AlinsType={}))[e.ElementBuilder=1]="ElementBuilder",e[e.Element=2]="Element",e[e.TextNode=3]="TextNode",e[e.Proxy=4]="Proxy",e[e.Ref=5]="Ref",e[e.BindResult=6]="BindResult",e[e.If=7]="If",e[e.Switch=8]="Switch",j.OprateType=void 0,(e=j.OprateType||(j.OprateType={}))[e.Replace=0]="Replace",e[e.Remove=1]="Remove",e[e.Insert=2]="Insert",e[e.Push=3]="Push",e[e.Sort=4]="Sort";var o={splice:function(n,e){var t=this.target,r=this.origin;n>=t.length?(n=t.length,e=0):(void 0===e||n+e>t.length)&&(e=t.length-n);for(var o=arguments.length,i=new Array(2<o?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];var c=i.length,u=Math.min(e,c),l=n+u;e<c?(u=b(t,i.slice(u),l),A(t,j.OprateType.Insert,l,u,u.length)):(u=e-c,A(t,j.OprateType.Remove,l,t.slice(l,l+u),u));for(var f=n;f<l;f++){var s=i[f-n];A(t,j.OprateType.Replace,f,[s,t[f]],1)}var v=t[L].scopeItems,p=null==v?void 0:v.slice(n,n+i.length).map(function(n){return n[v.key].v});return $(t,function(){return r.call.apply(r,[t[L].proxy,n,e].concat(d(p)))})},push:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=this.target,o=this.origin,e=b(r,e,r.length);return A(r,j.OprateType.Push,r.length,e,e.length),o.call.apply(o,[r[L].proxy].concat(d(e)))},pop:function(){var n=this.target,e=this.origin;return 0<n.length&&A(n,j.OprateType.Remove,n.length-1,[n[n.length-1]],1),e.call(n[L].proxy)},unshift:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=this.target,o=this.origin,e=b(r,e,0);return A(r,j.OprateType.Insert,0,e,e.length),$(r,function(){return o.call.apply(o,[r[L].proxy].concat(d(e)))})},shift:function(){var n=this.target,e=this.origin;return 0<n.length&&A(n,j.OprateType.Remove,0,n[0],1),e.call(n[L].proxy)},replace:function(n,e,t,r){A(n,j.OprateType.Replace,e,[r,t],1),n[e]=r}},i={};function W(n){i.map=n}function U(n,e,t){return o[e]&&n[a]&&!n[e].hack?(n[e]=o[e].bind({target:n,origin:n[e]}),n[e].hack=!0,n[e]):i[e]?i[e].bind(n):Reflect.get(n,e,t)}function V(n,e,t){return n[a]?(o.replace(n,parseInt(e),n[e],t),!0):g}var S=null,w=!1;function J(){return w}function X(n){S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,w=!1;n=n();return S=null,n}function u(n){return(null==n?void 0:n[p])===j.AlinsType.Ref}function k(n){n=null==n?void 0:n[p];return n===j.AlinsType.Proxy||n===j.AlinsType.Ref}function l(n){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]||!n||"object"!==h(n)?s({v:n},p,j.AlinsType.Ref):n}function q(a,e,n){function t(e,t,r,o,n){function i(n){n(t,r,"".concat(c.join("."),".").concat(e),e,o)}n&&null!=(n=a[L].commonLns)&&n.forEach(i),null!=(n=a[L].lns[e])&&n.forEach(i),null!=(n=a[L].extraLns)&&n.forEach(function(n){null!=(n=n[e])&&n.forEach(i)})}var c=e?[].concat(d(n),[e]):d(n),n=Array.isArray(a);a[L].commonLns&&(a[L].lns[e]=new Set,a[L].commonLns.forEach(function(n){a[L].lns[e].add(n)})),Object.assign(a[L],{path:c,triggerChange:t,forceWrite:function(n){for(var e in n)t(e,n[e],a[e]);Object.assign(a,n)},subscribe:function(n){var e,t,r,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];for(r in null!=(e=a[L].commonLns)&&e.add(n)||(a[L].commonLns=new Set([n])),a)null!=(t=a[L].lns[r])&&t.add(n)||(a[L].lns[r]=new Set([n])),o&&k(a[r])&&a[r][L].subscribe(n,o)},isArray:n,forceUpdate:function(){for(var n in a)t(n,a[n],a[n])}})}function O(c){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=n.commonLns,t=n.lns,o=void 0===t?{}:t,t=n.shallow,u=void 0!==t&&t,l=n.set,i=n.get,t=n.path,f=void 0===t?[]:t,t=n.key,n=void 0===t?"":t;if(c[p]||(c[p]=j.AlinsType.Proxy),!u)for(var r in c){var a=c[r];if(a&&"object"===h(a))try{c[r]=O(a,{path:f,key:r})}catch(n){}}c[L]={commonLns:e,lns:o,shallow:u},q(c,n,f);var t=c[L],s=t.triggerChange,v=t.isArray,e=new Proxy(c,{get:function(n,e,t){var r="function"==typeof n[e];if(v&&r)return U(n,e,t);if("symbol"===h(e)||r){if(e===m)return!0}else{if(S)return w=w||!0,null!=(r=o[e])&&r.add(S)||(o[e]=new Set([S])),Reflect.get(n,e,t);if("v"===e&&i)return i()}return Reflect.get(n,e,t)},set:function(n,e,t,r){if("symbol"===h(e)||"function"==typeof n[e])return Reflect.set(n,e,t,r);var o=n[e];if(t===o&&(null==(a=n[L])||!a._map))return!0;if(null===l)return console.warn("Computed 不可设置"),!0;if("v"===e&&l)return l(t,o,"".concat(f.join("."),".").concat(e),e),!0;t&&"object"===h(t)&&!u&&(k(t)?(t[m]||(t=t[L].proxy),k(o)&&!1!==c[L].replaceLns&&x(t,o)):(o&&(o[L].removed=!0),t=O(t,{commonLns:n[L].commonLns,lns:null==o?void 0:o[L].lns,shallow:u,path:f,key:e})));var i,a=g;return v&&/^\d+$/.test(e)&&((i=V(n,e,t))!==g&&(a=i)),a===g&&(a=Reflect.set(n,e,t,r)),s(e,t,o,!1,void 0===o),a},deleteProperty:function(n,e){return s(e,void 0,n[e],!0),Reflect.deleteProperty(n,e)}});return c[L].proxy=e}function x(n,e){var t,r,o=n[L],i=e[L];for(r in i.extraLns&&i.extraLns.has(o.lns)?(t=o.lns,o.lns=i.lns,i.lns=t,i.extraLns.delete(t)):o.extraLns?o.extraLns.add(i.lns):o.extraLns=new Set([i.lns]),n)k(n[r])&&k(e[r])&&x(n[r],e[r])}function f(n){var e,t="function"==typeof n,r=t?n:n.get,t=t?null:n.set,n=X(r,function(){e[L].forceWrite(l(r(),!0))});return w?e=O(l(n,!0),{set:t,get:r}):{v:n}}function C(n,e){var t=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if("function"==typeof n){n=f(n);var i=e;e=function(n,e,t,r,o){!function n(e,t,r,o){var i=!(2<arguments.length&&void 0!==r)||r,r=!(3<arguments.length&&void 0!==o)||o;if(e&&t&&"object"===h(e)&&"object"===h(t)&&(r||i)){if(Array.isArray(e)){if(e.length!==t.length)return}else if(Object.keys(e).length!==Object.keys(t).length)return;for(var a in e)if(!n(e[a],t[a],i,!1))return;return 1}return e===t}(n,e)&&i(n,e,t,r,o)}}else if(!k(n))return n;return n[L]&&n[L].subscribe(e,t),n}function z(n,e){n[a]?n[a].push(e):n[a]=[e]}var e=Symbol("b");function G(i,n){for(var e=0;e<n.length;e++){var t=n[e];u(t)||"function"==typeof t||(i[e]="".concat(i[e]).concat(t).concat(i[e+1]),i.splice(e+1,1),n.splice(e,1),e--)}if(0===n.length)return i[0];function r(t){var r=n.map(function(n){return"function"==typeof n?function(){return n()}:function(){return n.v}}),o=r.length;return C(function(){for(var n=i[0],e=0;e<o;e++)n+=r[e]()+i[e+1];return n},function(n,e){t(n,e)},!1).v}return r[p]=j.AlinsType.BindResult,r}function H(n){if(D(n)){for(var e=arguments.length,t=new Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return G(n,t)}return O(l(n))}var E,N={createElement:function(n){n=document.createElement(n);return n[p]=j.AlinsType.Element,n},createTextNode:function(n){n=document.createTextNode(n);return n[p]=j.AlinsType.TextNode,n},createEmptyMountNode:function(){return document.createComment("")},createDocumentFragment:function(){return document.createDocumentFragment()},isFragment:function(n){return n instanceof DocumentFragment},isOriginElement:function(n){return n instanceof Node},isElement:function(n){return this.isFragment(n)||this.isOriginElement(n)}};function v(n){return n?N.isFragment(n)?n.firstChild:n:null}function B(n,e){return n.parentElement||n.parentNode||(1<arguments.length&&void 0!==e?e:null)}function T(a){function c(){var n=f;if(n!==l){for(;n.nextSibling&&n.nextSibling!==l;)try{n.nextSibling.remove()}catch(n){console.error(n);break}n.remove()}f=l}var u,l=null,f=null;return{getNodes:function(){for(var n=[],e=f;e&&e!==l;)n.push(e),e=e.nextSibling;return n},start:function(){return f},setStart:function(n){n&&(f=v(n)||l)},replaceStart:function(n,e){v(n)===f&&(f=v(e))},replaceBranch:function(n){var e=n.current(),t=a.call(n);return console.log("branch debug:dom",t),n.inited?t?n.isVisible(e)&&(console.log("branch debug:replace 222"),this.replaceContent(t,n)):(console.log("branch debug:clearDom"),c(),n.updateActiveCache()):(n.inited=!0,console.log("branch debug:replace 111"),this.replaceContent(t,n)),t},replaceContent:function(e,n){if(!l||!f)return console.log("branch debug:replaceContent"),u=function(n){if(l=N.createEmptyMountNode(),f=v(n)||l,N.isFragment(n))return n.appendChild(l),n;var e=N.createDocumentFragment();return n&&e.appendChild(n),e.appendChild(l),e}(e);var t=B(l,u);if(t!==e){if(c(),!e)return null!=n&&n.updateActiveCache(),e;for(var r=v(e),o=r||l,i=null==n?void 0:n.parent;i&&i.anchor.start()===f;)i.anchor.setStart(o),i.call&&a.modifyCache(i,r),i=i.parent;f=o,console.log("branch debug:container insert",t,f,l);try{t.insertBefore(e,l),null!=n&&n.updateActiveCache()}catch(n){console.error(n,t,e,l)}}return e},clearCache:function(){}}}function K(n,e,o){console.log("branch debug:enter if",e.toString());function i(n){if(u===n)return!0;var e=c[u=n];return a.replaceBranch(e),console.warn("switch node",n),!1!==e.call.returned}function t(n){console.warn("if onDataChange",n);for(var e,t=n.length,r=0;r<t;r++)if(n[r])return(e=i(r))||r===t-1?e:i(t-1)}function r(n,e){var t=l,r=l++;c[r]=o.branch.next(e,a,2<arguments.length&&void 0!==arguments[2]&&arguments[2]),s[r]=n,f===g&&("function"==typeof n?n():n.v)&&(n=o.cache.call(c[r],a),!1!==e.returned&&(u=t,f=n))}var a=T(o.cache),c=[],u=-1,l=0,f=g,s=[],v=(r(n,e,!0),{elif:function(n,e){return r(n,e),v},else:function(n){return r(function(){return!0},n),v},end:function(){return r(function(){return!0},0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){}),C(function(){return s.map(function(n){return"function"==typeof n?n():n.v})},t,!1),o.branch.back(),f!==g?a.replaceContent(f):N.createDocumentFragment()}});return v}function Q(i,c,u){function l(n){var e=n.call,n=n.brk;if(e){e=p.get(e);if(!e)throw new Error("empty branch");e=v?u.cache.call(e,s):s.replaceBranch(e);if(e)return h=E.Return,e}return h=n?E.Break:E.Continue,!!n}function a(n){var e,t,r=!1,o=(h=E.Init,null),i=y(c);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(r){if(o=l(a))break}else if((a.value===n||!("value"in a))&&(r=!0,o=l(a)))break}}catch(n){i.e(n)}finally{i.f()}return h!==E.Return&&(t=p.get(f),o=v?u.cache.call(t,s):s.replaceBranch(t)),o}var f,s=T(u.cache),v=!0,p=new WeakMap,h=E.Init;return{end:function(){f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};var n,e=C(i,function(n){a(n)}),t=!0,r=y(c);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.call&&(p.set(o.call,u.branch.next(o.call,s,t)),t=t&&!1)}}catch(n){r.e(n)}finally{r.f()}p.set(f,u.branch.next(f,s,t)),u.branch.back();e=a(e.v);return v=!1,N.isElement(e)?s.replaceContent(e):N.createDocumentFragment()}}}function Y(a){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"$item",m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",b=this;if(!n)return b.map(a);var A=N.createDocumentFragment(),n=k(b),e=b.length;if(n){for(var S,w=N.createEmptyMountNode(),x=[],C=[],E=(b[L].scopeItems=C,b[L]._map=!0,C.key=g,function(n,e){n=O({v:n},{shallow:!0});n=s({},g,n);return m&&(n[m]=O({v:e},{shallow:!0})),n}),T=function(n,e){console.log("createChild",n,e);var t,r,n=E(n,e),o=a(n[g],n[m]||e),i=o;return o?N.isFragment(o)?0===(r=(t=o.childNodes).length)?(i=N.createEmptyMountNode(),o.appendChild(i),0===e&&(S=i)):(i=t[r-1],0===e&&(S=t[0])):0===e&&(S=o):(i=o=N.createEmptyMountNode(),0===e&&(S=o)),console.log(S,e),[o,i,n]},t=0;t<e;t++){var r=b[t],r=R(T(r,t),3),o=r[0],i=r[1],r=r[2];C[t]=r,A.appendChild(o),x[t]=i}z(b,function(n){var e,r=n.index,t=n.count,o=n.data;switch(n.type){case j.OprateType.Push:for(var i=N.createDocumentFragment(),a=b.length,c=0;c<o.length;c++){var u=R(T(o[c],a+c),3),l=u[0],f=u[1],u=u[2];x.push(f),C.push(u),i.appendChild(l)}B(w,A).insertBefore(i,w);break;case j.OprateType.Replace:C[r]?(console.warn("【debug: watch array replace2",r,JSON.stringify(o)),o[0]!==C[r][g].v&&(C[r][g].v=o[0]),m&&(C[r][m].v=r)):C[r]=E(o[0],r);break;case j.OprateType.Remove:if(0===t)break;for(var s=r-1,v=(null==(e=x[s+t])?void 0:e.nextSibling)||w,p=s<0?S||w:x[s];p.nextSibling&&p.nextSibling!==v;)p.nextSibling.remove();s<0&&(p!==w?(S=p.nextSibling,p.remove()):S=w),x.splice(r,t),C.splice(r,t);break;case j.OprateType.Insert:var h=0===r?S||w:x[r-1].nextSibling,d=[],y=[];o.forEach(function(n,e){var n=R(T(n,r+e),3),e=n[0],t=n[1],n=n[2];B(h,A).insertBefore(e,h),y.push(n),d.push(t)}),C.splice.apply(C,[r,0].concat(y)),x.splice.apply(x,[r,0].concat(d))}}),A.appendChild(w)}else for(var c=0;c<e;c++){var u=a(b[c],c);u&&A.appendChild(u)}return A}function I(n,o){var e="object"===h(n)&&!k(n)&&void 0!==n.enable,t=e?n.value:n,i=!0,a="",a=P(t,function(n,e,t,r){a=n,i&&o(n,e,t,r)});return e&&(i=C(n.enable,function(n){o((i=n)?a:null,null,"","")}).v),o(i?a:null,void 0,"",""),a}function Z(o,i){if(u(o)||"object"!==h(o))return P(o,function(n){i("",n)});var n=function(){var n,t,e,r={};o.$value?(n=P(o.$value,function(n){var e,t=new Set([]);for(e in r)!0===r[e]&&t.add(e);n.split(" ").forEach(function(n){!1!==r[n]&&t.add(n)}),i("",Array.from(t).join(" "))}),t=new Set(n.split(" ")),delete o.$value):t=new Set([]);for(e in o)!function(e){t[(r[e]=!!P(o[e],function(n){r[e]=n,i(e,n)}))?"add":"delete"](e)}(e);return{v:Array.from(t).join(" ")}}();return"object"===h(n)?n.v:void 0}function P(n,e){if("function"==typeof n||k(n)&&void 0!==n.v)return C(n,e).v;try{return"string"==typeof n?n:n.toString()}catch(n){throw new Error(n)}}function nn(c,n){if(null!=n){if("function"==typeof n||k(n))I(n,function(n,e,t,r,o){if("string"==typeof n)r&&"v"!==r?c.style[r]=o?"":n:c.setAttribute("style",n);else{for(var i in n)c.style[i]=n[i];for(var a in e)void 0===n[a]&&(c.style[a]="")}});else{if("object"!==h(n))return;for(var e in n)!function(e){I(n[e],function(n){c.style[e]=null===n?"":n})}(e)}return 1}}(t=E=E||{})[t.Init=0]="Init",t[t.Break=1]="Break",t[t.Return=2]="Return",t[t.Continue=3]="Continue",W(Y);var en={INPUT:1,SELECT:1,TEXTAREA:1};function tn(p,n){if(null!=n)if("function"==typeof n||k(n))I(n,function(n,e,t,r,o){if("string"==typeof n){if(r&&"v"!==r)return void(o?p.removeAttribute(r):p.setAttribute(r,n));var i,o=n.matchAll(/(.*?)=(.*?)(&|$)/g),a=(n={},y(o));try{for(a.s();!(i=a.n()).done;){var c=i.value;n[c[1]]=c[2]}}catch(n){a.e(n)}finally{a.f()}var u,r=e.matchAll(/(.*?)=(.*?)(&|$)/g),l=(e={},y(r));try{for(l.s();!(u=l.n()).done;){var f=u.value;e[f[1]]=f[2]}}catch(n){l.e(n)}finally{l.f()}}for(var s in n)p.setAttribute(s,n[s]);for(var v in e)void 0===n[v]&&p.removeAttribute(v)});else{if("object"!==h(n))return;for(var e in n)!function(e){I(n[e],function(n){null===n?p.removeAttribute(n):p.setAttribute(e,n)})}(e)}}function rn(s){var n;if(s.isText)v=N.createTextNode(""),""!==s.text&&(e=s.text,(n=function(n){v.textContent=n})(P(e,n),void 0,"",""));else{var e=!!s.tag,v=e?N.createElement(s.tag):N.createDocumentFragment();if(s.children&&!function n(e,t){var r,o=y(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value;if(null!=a){if(Array.isArray(a))return void n(e,a);N.isElement(a)?e.appendChild(a):(i=rn(on(a)?a:{text:a,isText:!0}),e.appendChild(i))}}}catch(n){o.e(n)}finally{o.f()}}(v,s.children),e){var t,r=function(e){var n,t,r=s.attributes[e];if(u=v,t=r,(n=e).startsWith("on")&&((null===u[n]||"function"==typeof u[n])&&("function"==typeof t||"function"==typeof(null==t?void 0:t.listener)||"string"==typeof(null==t?void 0:t.__deco)))){var o=v,i=e,a=r;if(i=i.substring(2),"function"==typeof a)o.addEventListener(i,a);else{if(a.__deco){var c,u=a.__deco.split("-"),l=(a={listener:a.v},y(u));try{for(l.s();!(c=l.n()).done;){var f=c.value;a[f]=!0}}catch(n){l.e(n)}finally{l.f()}}o.addEventListener(i,function n(e){a.self&&e.target!==o||(a.stop&&e.stopPropagation(),a.prevent&&e.preventDefault(),a.once&&o.removeEventListener(i,n,a.capture),a.listener(e))},a.capture)}return"continue"}if("$parent"===e)r.appendChild(v);else if("$attributes"===e)tn(v,r);else if("$show"===e)I(r,function(n){v.style.display=n?"":"none"});else{if("class"!==e)return"style"===e&&nn(v,r)||function(e,n,t){if(("value"===t||"checked"===t)&&(k(n)||n.__deco)){var r,o,i,a=e.tagName;if(en[a])return r=n.__deco||h(n.v),o=(o={boolean:function(n){return"true"===n},number:function(n){return parseFloat(n)},string:function(n){return n}}[r])||function(n){return n},i=n.__deco?n.v:n,e.addEventListener("SELECT"===a?"change":"input",function(){var n=e[t];r!==h(n)&&(n=o(n)),i.v=Number.isNaN(n)?"":n}),C(i,function(n){e[t]=n},!1),e[t]=i.v,1}}(v,r,e)?"continue":void I(r,function(n){null===n?v.removeAttribute(e):v.setAttribute(e,n)});v.className=Z(r,function(n,e){n?e?v.classList.add(n):v.classList.remove(n):v.className=e})}};for(t in s.attributes)r(t)}}return v}function on(n){return"object"===h(n)&&!0===n.jsx}function F(n,e,t){var e=!(1<arguments.length&&void 0!==e)||e,r=2<arguments.length?t:void 0;if(n&&n instanceof Promise){if(!1===e)return;var o=N.createDocumentFragment(),i=N.createEmptyMountNode();return o.appendChild(i),n.then(function(n){if(N.isElement(n)){var e=B(i,o);try{e.insertBefore(n,i)}catch(n){console.log("node 已被隐藏")}finally{null!=r&&r(n),i.remove()}}}),o}return n}function an(){var s=new WeakMap;return{call:function(e,t){var r=this,n=(e.visit(),e.call),o=s.get(n);if(console.log("branch debug:item",e.id,o),void 0!==o){if(!o)return null;if(1===o.length)return o[0];var i,a=N.createDocumentFragment(),c=y(o);try{for(c.s();!(i=c.n()).done;){var u=i.value;a.appendChild(u)}}catch(n){c.e(n)}finally{c.f()}return a}var l,f,o=n();if(!1===n.returned?l=F(o,!1):f=v(l=F(o,!(f=null),function(n){r.modifyCache(e,n),null!=t&&t.replaceStart(f,n),f=null})),N.isElement(l)||void 0===l)return this.modifyCache(e,l),l;throw new Error("动态条件分支中不允许返回非元素类型")},modifyCache:function(n,e){n.call&&(e=(e=e)?N.isFragment(e)?Array.from(e.childNodes):Array.isArray(e)?e:[e]:null,console.log("branch debug: cacheMap set",n.id,e),s.set(n.call,e))},setCache:function(n,e){s.set(n,e)},_get:function(n){return s.get(n)}}}function cn(r,n){console.log("createBranchLink");var o=[],i=0,a={anchor:n,parent:null},c=null,u=null,l=!1;return{next:function(n,e){var t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=function(n,t){var e=0===o.length?a:o[o.length-1],e=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?e:null==e?void 0:e.parent;return{id:i++,call:n,parent:e,activeChild:null,anchor:t,current:function(){return c},isVisible:function(n){if(!u){u=new WeakMap;for(var e=n||c,t=[];e;)t.push(e.id),u.set(e,1),e=e.parent;console.log("branch debug:branchpath",t.toString())}if(!!u.get(this))return!0;var r=this.parent;if(!r||u.get(r))return!0;for(;r;){if(!!u.get(r))break;r=r.parent}return!1},visit:function(){c!==this&&(l&&(o=[this]),(c=this).parent&&(this.parent.activeChild=this),u=null)},updateCache:function(){var n,e=t.getNodes();console.log("branch debug: updateCache",this.id,e),r.setCache(this.call,e),null!=(n=null==(e=this.parent)?void 0:e.updateCache)&&n.call(e)},updateActiveCache:function(){var n,e;null!=(e=null==(n=this.getBottomChild().parent)?void 0:n.updateCache)&&e.call(n)},clearCache:function(){},getBottomChild:function(){for(var n=this;n.activeChild;)n=n.activeChild;return n}}}(n,e,t);return t?o.push(n):o[o.length-1]=n,console.warn("branch debug:next:".concat(n.id,":").concat(t),n.call.toString()),n},back:function(){console.warn("branch:back");var n=o.pop();return 0===o.length&&(l=!0),n}}}function un(){var n=an(),e=T(n),t={anchor:e,cache:n,branch:cn(n,e)};return{util:t,if:function(n,e){return K(n,e,t)},switch:function(n,e){return Q(n,e,t)}}}var t={ce:{createElement:function(n){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length,r=new Array(2<t?t-2:0),o=2;o<t;o++)r[o-2]=arguments[o];if("function"!=typeof n)return rn({tag:n,attributes:e,children:r,jsx:!0});var i,a=e.$parent;for(i in delete e.$parent,e){var c=e[i];k(c)||(e[i]={v:c})}n=F(n(e,r));return a&&a.appendChild(n),n}}.createElement,mnr:function(n){return n.returned=!1,n},r:H,c:f,w:C,cc:function(n,e){return f({get:n,set:e})}};return Object.assign(un,t),j.ContextTool=t,j.Renderer=N,j._if=K,j._switch=Q,j.arrayFuncProxy=U,j.assignLast=function(n,e){n[n.length-1]=e},j.binding=e,j.child=M,j.computed=f,j.createBinding=G,j.createContext=un,j.createProxy=O,j.createUtils=q,j.delay=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(n){setTimeout(function(){n(!0)},e)})},j.empty=g,j.getFirstElement=v,j.getFuncArgs=function(n){return(null==(n=n.toString().match(_))?void 0:n[0])||""},j.isBindingResult=function(n){return(null==n?void 0:n[p])===j.AlinsType.BindResult},j.isDepReactive=J,j.isObject=function(n){return n&&"object"===h(n)},j.isProxy=k,j.isRef=u,j.isSafari=n,j.isSimpleValue=function(n){return"object"!==h(n)||null===n},j.isStringTemplateArray=D,j.join=function(n,e){for(var t="",r=0;r<n.length-1;r++)t+="".concat(n[r]).concat("function"==typeof e?e(r):e[r]);return t+n[n.length-1]},j.map=Y,j.mergeSet=function(e,n){return e?(n&&n.forEach(function(n){e.add(n)}),e):n},j.observe=X,j.pureproxy=m,j.react=H,j.reactiveBindingEnable=I,j.registArrayMap=W,j.replaceArrayItem=V,j.replaceLNS=x,j.splitTwoPart=function(n,e){return-1===(e=n.indexOf(e))?[n,""]:[n.substring(0,e).trim(),n.substring(e+1).trim()]},j.trig=a,j.type=p,j.util=L,j.version="0.0.18",j.watch=C,j.watchArray=z,j.watchRef=function(n,e){return C(n,e,!1)},j.wrapReactive=l,Object.defineProperty(j,"__esModule",{value:!0}),j}({});
