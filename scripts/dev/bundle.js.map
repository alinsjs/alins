{
  "version": 3,
  "sources": ["../../packages/utils/src/utils.ts", "../../packages/utils/src/types/symbol.ts", "../../packages/reactive/src/proxy.ts", "../../packages/reactive/src/react.ts", "../../packages/reactive/src/computed.ts", "../../packages/reactive/src/binding.ts", "../../packages/core/src/parser/info-parser.ts", "../../packages/core/src/element/transform.ts", "../../packages/core/src/mount.ts", "../../packages/core/src/controller/model.ts", "../../packages/core/src/controller/for.ts", "../../packages/core/src/controller/if.ts", "../../packages/core/src/controller/show.ts", "../../packages/core/src/controller/switch.ts", "../../packages/core/src/controller/controller.ts", "../../packages/core/src/builder/builder.ts", "../../packages/core/src/comp/comp.ts", "../../packages/core/src/comp/prop.ts", "../../packages/core/src/comp/event.ts", "../../packages/core/src/comp/slot.ts", "../../packages/core/src/event/on.ts", "../../packages/style/src/css.ts", "../../packages/style/src/style-atom.ts", "../../packages/style/src/style.ts", "samples/count.ts", "samples/for-3.ts", "samples/hello-world.ts", "samples/style-comp.ts", "samples/todo-list.ts", "index.ts"],
  "sourcesContent": ["/*\n * @Author: tackchen\n * @Date: 2022-10-11 16:54:25\n * @Description: Coding something\n */\nexport function split (str: string, s: string): [string, string] {\n    const index = str.indexOf(s);\n    if (index === -1 || !s) return [str, ''];\n    return [str.substring(0, index), str.substring(index + 1)];\n}\n\nexport function join (array: string[], fn: string[] | ((index: number)=>string)) {\n    let str = '';\n    for (let i = 0; i < array.length - 1; i++) {\n        str += `${array[i]}${typeof fn === 'function' ? fn(i) : fn[i]}`;\n    }\n    return str + array[array.length - 1];\n}\n\nexport function delay (time = 0) {\n    return new Promise((resolve) => {\n        setTimeout(() => {\n            resolve(true);\n        }, time);\n    });\n}\n\nconst FuncArgExp = /\\(.*?\\)/;\nexport function getFuncArgs (fn: Function) {\n    return fn.toString().match(FuncArgExp)?.[0] || '';\n}\n\nexport function isStringTemplateArray (data: any) {\n    return data instanceof Array && (data as any).raw instanceof Array;\n}\n\nexport function splitTwoPart (str: string, sep: string) {\n    const index = str.indexOf(sep);\n    if (index === -1) return [str, ''];\n    return [str.substring(0, index).trim(), str.substring(index + 1).trim()];\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-23 19:09:15\n * @Description: Coding something\n */\n\n\nexport const subscribe = Symbol();\nexport const forceUpdate = Symbol();\nexport const index = Symbol();\nexport const value = Symbol();\nexport const reactValue = Symbol();\nexport const getListeners = Symbol();\nexport const updateFirstLevel = Symbol();\nexport const json = Symbol();\n", "/*\n * @Author: tackchen\n * @Date: 2022-10-13 07:33:15\n * @Description: Coding something\n */\n\nimport {\n    forceUpdate, subscribe, reactValue,\n    value, getListeners, updateFirstLevel, json\n} from 'alins-utils';\nimport {IJson} from 'alins-utils/src/types/common.d';\nimport {IReactObject} from 'alins-utils/src/types/react.d';\nimport {\n    reactiveValue,  isReaction,\n    getReactionPureValue, mergeReact, reactiveProxyValue\n} from './react';\n\n// 1. emptyValue // \u4F7F\u7528 isUndefined \u51FD\u6570\u89E3\u51B3\n// 2. change value \u53C2\u6570\u95EE\u9898 getReactionPureValue\n// 3. switchListeners \u6DF1\u5EA6\u904D\u5386\u95EE\u9898\n\nexport function createProxy<T extends IJson> (\n    originData: T,\n    firstLevel = true,\n    changeList: Function[] = [],\n): IReactObject<T> {\n\n    const data = originData as any;\n\n    if (typeof data === 'object') {\n        for (const key in data) {\n            if (key === 'toJSON') break;\n            data[key] = reactiveProxyValue(data[key]);\n        }\n    }\n\n    const triggerChange = (newValue: any, oldValue: any, index?: number) => {\n        // value = getReactionPureValue(value);\n        // oldValue = getReactionPureValue(oldValue);\n        // debugger;\n        console.log(newValue, oldValue);\n        for (let i = 0; i < changeList.length; i++) {\n            changeList[i](newValue, oldValue, index);\n        }\n    };\n\n    // ! assign react properties\n    Object.assign(data, {\n        [subscribe] (fn: any) {\n            changeList.push(fn);\n            return data;\n        },\n        [forceUpdate] () {\n            triggerChange(data, data);\n        },\n        [reactValue]: false,\n        [updateFirstLevel]: () => {\n            firstLevel = false;\n        },\n        [getListeners]: () => changeList,\n        get [json] () { return getReactionPureValue(data);}\n    });\n\n    return new Proxy(data, {\n        get (target: IJson, property, receiver) {\n            if (property === value) return data;\n            const type = typeof data[property];\n            if (!(Array.isArray(target) && (property === 'length' || type === 'function'))) {\n                if (type === 'undefined' && property !== 'toJSON') {\n                    data[property] = reactiveValue('', true);\n                }\n            }\n            return Reflect.get(target, property, receiver);\n        },\n        set (target: IJson, property, v, receiver) {\n            const isArray = target instanceof Array;\n            const isSymbol = typeof property === 'symbol';\n            // if (isArray && !isSymbol && /^\\d+$/.test(property as string)) debugger;\n            const parseIndex = () => (isArray && !isSymbol && /^\\d+$/.test(property as string)) ? parseInt(property as string) : -1;\n            const set = () => {\n                return Reflect.set(target, property, v, receiver);\n            };\n            if (isArray) {\n                if (property === 'length') return set();// \u6570\u7EC4\u7684length\u5C5E\u6027\n                if (target.includes(v)) { // \u6570\u7EC4\u7C7B\u578B\u7684\u5185\u90E8\u5143\u7D20\u4F4D\u7F6E\u53D8\u66F4\n                    // todo \u76D1\u542C\n                    const index = parseIndex();\n                    triggerChange(v, target[index], index);\n                    return set();\n                }\n            }\n\n            if (isSymbol) {\n                if (property === value) {\n                    if (firstLevel) {\n                        console.warn('\u4E0D\u80FD\u5BF9\u4E00\u7EA7\u5BF9\u8C61\u8BBE\u7F6Evalue\u5C5E\u6027');\n                        return true;\n                    }\n                }\n                return set();\n            }\n\n            const oldValue = target[property];\n            if (isReaction(v)) { // ! \u5F53\u503C\u662Freaction\u65F6\u4E0D\u9700\u8981\u4EE3\u7406\u76F4\u63A5\u8BBE\u7F6E\n                // todo \u76D1\u542C\n                // \u76F4\u63A5\u8BBE\u7F6E\n                v[updateFirstLevel](); // ! \u8FD9\u4E00\u6B65\u662F\u4E3A\u4E86\u53BB\u6389 \u65E7\u6570\u636E\u7684firstLevel\n                triggerChange(v, oldValue);\n                return set();\n            }\n            const isOldValueUnd = typeof oldValue === 'undefined';\n            if (isOldValueUnd) {\n                // ! \u65B0\u521B\u5EFA\u7684\u5C5E\u6027\u6216\u5143\u7D20\u505A\u4E00\u4E0Breactive\u5904\u7406\n                v = reactiveProxyValue(v);\n                triggerChange(v, oldValue, parseIndex());\n            } else {\n                // \u5982\u679C\u503C\u4E00\u6837\u5219\u4E0D\u8BBE\u7F6E\n                // ! \u5BF9reaction\u503C\u7684\u8BBE\u7F6E\u8F6C\u79FB\u5230 value \u5C5E\u6027\u4E0A\u6765\n                if (oldValue[reactValue]) {\n                    target = oldValue;\n                    property = 'value';\n                } else {\n                    v = reactiveProxyValue(v);\n                    if (isArray) {\n                        const index = parseIndex();\n                        triggerChange(v, target[index], index);\n                    } else {\n                        mergeReact(oldValue, v);\n                    }\n                }\n            }\n            return set();\n        },\n        deleteProperty (target: IJson, property) {\n            if (target instanceof Array) {\n                const index = (typeof property === 'string' && /^\\d+$/.test(property as string)) ? parseInt(property as string) : -1;\n                triggerChange(undefined, target[index], index);\n            } else {\n                triggerChange(undefined, target[property]);\n            }\n            return Reflect.deleteProperty(target, property);\n        }\n    }) as any;\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 21:35:20\n * @Description: react data\n */\n\nimport {\n    isStringTemplateArray, join,\n    subscribe, forceUpdate, value, reactValue, getListeners\n} from 'alins-utils';\nimport {\n    IReactBindingTemplate, IReactBuilder, IReactContext,\n    IReactWrap, TReactionItem, IReactItem, IReactBinding,\n    IReactObject, IReactBase, IComputedItem\n} from 'alins-utils/src/types/react.d';\nimport {Compute, computed} from './computed';\nimport {createProxy} from './proxy';\n\nfunction bindReactive ({\n    template,\n    reactions,\n}: IReactBindingTemplate): IReactBuilder {\n    // console.log('bindReactive', template, reactions);\n    return {\n        templateValue () {\n            return template.join('');\n        },\n        isEmpty () {\n            return reactions.length === 0;\n        },\n        // todo \u4ECEdiv\u6784\u5EFA\u5904\u4F20\u5165\u4E0A\u4E0B\u6587\u73AF\u5883\n        exe (context: IReactContext) {\n            // debugger;\n            return {template, reactions, context}; // todo\n        },\n        modTemplate (mod, i = template.length - 1) {\n            template[i] = mod(template[i]);\n        },\n        type: 'react'\n    };\n}\n\nexport function createReactive<T> (data: T): IReactWrap<T> {\n    if (isSimpleValue(data)) {\n        // \u503C\u7C7B\u578B\n        return reactiveValue(data) as IReactWrap<T>;\n    }\n\n    if (typeof data === 'object') {\n        return createProxy(data as any) as IReactWrap<T>;\n    }\n    \n    throw new Error('createReactive error');\n}\n\nexport function reactiveValue<T> (value: T, isUndefined = false): IReactItem<T> {\n    const changeList: Function[] = [];\n    return {\n        isUndefined () {\n            return typeof value === 'undefined' || isUndefined;\n        },\n        get value () {\n            Compute.add?.(this);\n            return value;\n        },\n        set value (v: any) {\n            if (isUndefined) isUndefined = false;\n            if (v instanceof Array) v = v.join('\\n');\n            if (v === value) return;\n            const old = value;\n            value = v;\n            changeList.forEach(fn => {fn(v, old);});\n        },\n        [reactValue]: true,\n        [subscribe] (fn) {\n            changeList.push(fn);\n            return this.value;\n        },\n        [forceUpdate] () {\n            changeList.forEach(fn => {fn(value, value);});\n        },\n        toJSON () {return isUndefined ? undefined : this.value;},\n        [getListeners]: () => {\n            // console.count('getListeners');\n            return changeList;\n        },\n    };\n}\n// \u521D\u59CB\u5316\u54CD\u5E94\u6570\u636E\nexport function react<T>(data: T): IReactWrap<T>;\n\n// \u751F\u6210\u54CD\u5E94\u6570\u636E\u7ED1\u5B9A\nexport function react(ts: TemplateStringsArray, ...reactions: TReactionItem[]): IReactBuilder;\n// es6\u517C\u5BB9\u5199\u6CD5\nexport function react(data: string, ...reactions: (TReactionItem | string)[]): IReactBuilder;\n\nexport function react<T> (\n    data: TemplateStringsArray | T | string,\n    ...reactions: (TReactionItem| string)[]\n): IReactBuilder | IReactWrap<T> | IReactItem<T> {\n    // todo check is TemplateStringsArray\n    if (isStringTemplateArray(data)) {\n        return bindReactive({\n            template: data as unknown as string[],\n            reactions,\n        });\n    } else if (typeof data === 'string' && reactions.length > 0) {\n        return bindReactive(transArgsToTemplate(data, reactions));\n    } else {\n        return createReactive<T>(data as T);\n    }\n}\n\n// es6\u517C\u5BB9\u5199\u6CD5\nfunction transArgsToTemplate (data: string, reactions: (string|TReactionItem)[]) {\n    const template = [data];\n    let isLastString = true;\n    for (let i = 0; i < reactions.length; i++) {\n        const reaction = reactions[i];\n        const isString = typeof reaction === 'string';\n        if (isString) {\n            isLastString ? template[template.length - 1] += reaction : template.push(reaction);\n            reactions.splice(i, 1);\n            i --;\n        }\n        if (!isLastString && !isString) {\n            template.push('');\n        }\n        isLastString = isString; ;\n    }\n    if (!isLastString) template.push('');\n    return {\n        template,\n        reactions,\n    };\n}\n\n// \u5C06 TReactionItem \u8F6C\u6362 \u6210 computed\u6216\u8005 reactItem\nexport function transformToReaction<T> (item: TReactionItem<T>): IReactItem<T> | IComputedItem<T> {\n    return (typeof item === 'function') ? computed(item) : item;\n}\n// \u8BA1\u7B97TReactionItem\u7684\u503C\nexport function countReaction (item: TReactionItem) {\n    return (typeof item === 'function') ? item() : item.value;\n}\n// \u8BA1\u7B97\u4E00\u6B21IReactBinding\u6E32\u67D3\u540E\u7684\u503C\nexport function countBindingValue (binding: IReactBinding) {\n    return join(binding.template, binding.reactions.map(r => countReaction(r)));\n}\nexport function isSimpleValue (v: any) {\n    return typeof v !== 'object' || v === null;\n}\nexport function isReactSimpleValue (v: any) {\n    return v[reactValue] === true;\n}\n\nexport function mergeReact (\n    oldReact: IReactObject<any>,\n    newValue: any,\n) {\n    if (typeof newValue === 'function') return;\n\n    // const target = toReact as any;\n    // console.warn('react', react);\n    // console.warn('target', property, toReact);\n    // debugger;\n    // if (isReaction(target[property])) {\n    //     const listener = target[property][getListeners]();\n       \n    //     if (listener.length > 0) {\n    //         react[getListeners]().push(...listener);\n    //     }\n    // }\n    // {a: {b: 1, c: 2}, c: 2}, // \u65E7\u503C\n    // {a: {b: 2, d: 3}, d: 3} // \u65B0\u503C\n    if (isReactSimpleValue(newValue)) {\n        // const newReact = reactiveValue(newValue);\n        // setValue?.(newReact);\n        mergeListeners(oldReact, newValue);\n        // debugger;\n    } else {\n        const newKeys = Object.keys(newValue);\n        // ! \u5BF9\u4E8E\u5BF9\u8C61 \u9700\u8981\u53CC\u5411\u6392\u91CD\n        const oldTarget = oldReact as any;\n        // debugger;\n        for (const k in oldReact) {\n            // todo \u5982\u679C\u662Farr\u4E0D\u80FD\u6309\u7167\u8FD9\u79CD\u65B9\u5F0F\n            const oldItem = oldTarget[k];\n            const index = newKeys.indexOf(k);\n            if (index !== -1) { // \u65E7\u503C \u65B0\u503C\u4E2D\u90FD\u6709\n                mergeReact(oldItem, newValue[k]);\n                newKeys.splice(index, 1);\n            } else { // \u65B0\u503C\u4E2D\u6CA1\u6709\n                // todo \u5BF9\u4E8E\u52A8\u6001\u5C5E\u6027\u6CA1\u6709\u826F\u597D\u7684\u652F\u6301\n                delete oldTarget[k];\n                // debugger;\n            }\n        }\n        // \u65B0\u503C\u4E2D\u6709\u65E7\u503C\u4E2D\u6CA1\u6709\u7684\n        for (let i = 0; i < newKeys.length; i++) {\n            const key = newKeys[i];\n            oldTarget[key] = reactiveProxyValue(newValue[key]);\n        }\n    }\n\n}\n\nexport function mergeListeners (\n    oldReact: IReactBase<any>, // \u88AB\u8986\u76D6\u7684\u503C\n    newReact: IReactBase<any>, // \u65B0\u503C\n) {\n    // console.count('mergeListeners');\n    const arr = oldReact[getListeners]();\n    if (arr.length > 0) {\n        newReact[getListeners]().push(...arr);\n        newReact[forceUpdate](); // \u88AB\u8986\u76D6\u7684\u6570\u636E\u89E6\u53D1\u66F4\u65B0\n    }\n}\n\nexport function getReactionValue (reaction: any) {\n    return reaction[value] || reaction.value;\n}\n\nexport function isReaction (v: any): boolean {\n    return !!v?.[subscribe];\n}\n\n// export function isUndefined (v: any): boolean {\n//     return isReaction(v) ?\n//         (getReactionValue(v) === emptyValue) :\n//         (typeof v === 'undefined');\n// }\n\nexport function getReactionPureValue (data: any) {\n    return isReaction(data) ? JSON.parse(JSON.stringify(data)) : data;\n}\n\nexport function reactiveProxyValue (v: any) {\n    if (isReaction(v)) return v;\n    if (!isSimpleValue(v)) return createProxy(v, false);\n    return reactiveValue(v);\n}\ndeclare global {\n    // for ts declaration\n    // interface Array<T> extends IReactObject<T>{\n    // }\n    interface String extends IReactItem<string> {}\n    interface Number extends IReactItem<number> {}\n    interface Boolean extends IReactItem<boolean> {}\n    interface Object extends IReactObject<any>{\n    }\n}\n\n(window as any).react = react;", "/*\n * @Author: tackchen\n * @Date: 2022-10-17 08:45:21\n * @Description: Coding something\n */\n\nimport {\n    forceUpdate, getListeners,  reactValue, subscribe,\n} from 'alins-utils';\nimport {\n    countBindingValue, isSimpleValue,\n} from './react';\n\nimport {IComputedItem, IReactItem, TComputedFunc, IReactBuilder, TReactContextType} from 'alins-utils/src/types/react.d';\n\nexport interface TComputedObject<T> {\n    get(): T;\n}\n\nexport interface TComputedObjectSet<T> extends TComputedObject<T>{\n    set: ((v: T, old: T) => void);\n}\n\nexport const Compute: {\n    add: ((item: IReactItem)=>void) | null;\n} = {\n    add: null,\n};\n\nexport type TComputedBuilder<T> = TComputedObjectSet<T> | TComputedFunc<T> | TComputedObject<T>\n\nexport interface IComputed {\n    <T>(target: TComputedObjectSet<T> ): IReactItem<T>;\n    <T>(target: TComputedFunc<T> | TComputedObject<T> ): IComputedItem<T>;\n}\n\nexport const computed: IComputed = (target) => {\n    const isFunc = typeof target === 'function';\n    const get = isFunc ? target : target.get;\n    const set = isFunc ? null : (target as TComputedObjectSet<any>).set;\n\n    // ! \u4F9D\u8D56\u6536\u96C6\n    const reacts: IReactItem[] = [];\n    Compute.add = (item: IReactItem) => { reacts.push(item); };\n    const value = get();\n    Compute.add = null;\n    // debugger;\n\n    const react = reactiveComputed(get, set, value) as IReactItem;\n    reacts.forEach(item => item[subscribe](() => {\n        react[forceUpdate]();\n    }));\n    return react;\n};\n\nfunction reactiveComputed<T> (\n    get: TComputedObjectSet<T>['get'],\n    set: TComputedObjectSet<T>['set'] | null,\n    value: T,\n): IReactItem<T> {\n    const changeList: Function[] = [];\n    return {\n        isUndefined: () => typeof value === 'undefined',\n        get value () {\n            Compute.add?.(this);\n            value = get();\n            return value;\n        },\n        set value (v: any) {\n            if (!set) {\n                console.warn('\u5BF9\u53EA\u8BFBcomputed\u8BBE\u7F6E\u503C\u65E0\u6548');\n                return;\n            }\n            set(v, this.value);\n        },\n        [subscribe] (fn) {\n            changeList.push(fn);\n            return this.value;\n        },\n        [forceUpdate] () {\n            const old = value;\n            const v = this.value;\n            changeList.forEach(fn => {fn(v, old);});\n        },\n        [reactValue]: isSimpleValue(value),\n        [getListeners]: () => changeList,\n        toJSON: () => value,\n    };\n}\n\nexport function computedReactBuilder (\n    builder: IReactBuilder,\n    type: TReactContextType = 'computed'\n) {\n    if (!builder.isEmpty()) {\n        return computed(() => countBindingValue(builder.exe({type})));\n    }\n    return null;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    // return {[subscribe]: (v: any) => builder.templateValue()};\n}\n\nexport function subscribeReactBuilder (\n    builder: IReactBuilder,\n    onchange: (v: string, old: string) => void,\n    type: TReactContextType = 'computed',\n) {\n    const compute = computedReactBuilder(builder, type);\n    return compute ?\n        compute[subscribe](onchange) :\n        builder.templateValue();\n}\n\n(window as any).computedReactBuilder = computedReactBuilder;\n\n// const num = react(1);\n// const binding = react`${num}-1`;\n// const b = computedReactBuilder(binding);\n// b[subscribe](v => {\n//     console.log(v);\n// });\n\n// function test () {\n//     const num = react(1);\n//     const binding = react`${num}-1`;\n//     const {template, reactions} = binding.exe({\n//         type: 'style',\n//     });\n//     const templateRep = createTemplateReplacement(template);\n//     const v = reactiveTemplate(templateRep, reactions, (content, old) => {\n//         console.warn('111', content, old);\n//     }, true);\n//     console.warn('v', v);\n//     return num;\n// }\n// function test () {\n//     const num = react(1);\n//     const binding = react`${num}-1`;\n//     const v = computedReactBuilder(binding)[subscribe]((v, old) => {\n//         console.warn('111222', v, old);\n//     });\n//     console.warn('v', v);\n//     return num;\n// }", "/*\n * @Author: tackchen\n * @Date: 2022-10-12 14:22:03\n * @Description: Coding something\n */\n\nimport {IJson} from 'alins-utils/src/types/common.d';\nimport {TReactionItem} from 'alins-utils/src/types/react.d';\nimport {join, subscribe} from 'alins-utils';\nimport {transformToReaction} from './react';\n\nexport const ReplaceExp = /\\$\\$\\d+\\$\\$/;\nexport const ReplaceExpG = /\\$\\$\\d+\\$\\$/g;\n\nconst ReplacementMap: string[] = [];\nconst ReplacementMapReverse: IJson<number> = {};\n\nexport function createReplacement (i: number) {\n    if (ReplacementMap[i]) return ReplacementMap[i];\n    const str = `$$${i}$$`;\n    ReplacementMap[i] = str;\n    ReplacementMapReverse[str] = i;\n    return str;\n}\n\nexport function parseReplacementToNumber (replacement: string): number {\n    return ReplacementMapReverse[replacement] || parseInt(replacement.replace(/\\$\\$/g, ''));\n}\n\nexport function extractReplacement (str: string): null | string[] {\n    const results = str.match(ReplaceExpG);\n    if (!results) return null;\n    return results;\n}\n\nexport function createTemplateReplacement (template: string[], start = 0) {\n    return join(template, (i) => createReplacement(i + start));\n}\n\n// \u4F20\u5165\u6A21\u677F\u548Creaction callback\u4F20\u56DE\u6BCF\u6B21\u66F4\u65B0\u6E32\u67D3\u7684\u65B0\u503C\n// template = 'aaa$$0$$aaa'\n// \u521D\u6B21\u4F1A\u8FD4\u56DE\u9996\u6B21\u6E32\u67D3\u7684\u503C\nexport function reactiveTemplate (\n    templateRep: string,\n    reactions: TReactionItem[],\n    callback: (\n        content: string,\n        oldContent: string,\n    ) => void,\n    needOldContent = false,\n) {\n    if (reactions.length === 0) return templateRep;\n    const results = extractReplacement(templateRep);\n    if (results) {\n        const texts = templateRep.split(ReplaceExp);\n        const filler: string[] = results.map((item, i) => {\n            const index = parseReplacementToNumber(item);\n            const reaction = transformToReaction(reactions[index]);\n            return reaction[subscribe]((value) => {\n                const oldContent = needOldContent ? join(texts, filler) : '';\n                filler[i] = value;\n                const newContent = join(texts, filler);\n                callback(newContent, oldContent);\n                \n                // const oldClass = join(texts, filler);\n                // filler[i] = value;\n                // dom.classList.replace(oldClass, join(texts, filler));\n            });\n        });\n        return join(texts, filler);\n    }\n    return templateRep;\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 16:31:44\n * @Description: parse dom info\n * .class[a=1]#aa:dsd =>\n * {\n *  class: \"class\",\n *  attribute: {\n *      a: '1',\n *  },\n *  id: 'aa',\n *  content: 'dsd'\n * }\n */\n\nimport {split} from 'alins-utils';\nimport {IJson} from 'alins-utils/src/types/common.d';\n\nexport interface IDomInfoData {\n    className?: string[];\n    attributes?: IJson<string>;\n    id?: string;\n    textContent?: string;\n    tagName?: string;\n}\n\n\nexport const InfoKeys = ['className', 'attributes', 'id', 'textContent', 'tagName'] as const;\nexport type TInfoType = typeof InfoKeys[number];\n\n(window as any).parseCount = 0;\nexport function parseDomInfo (info: string): IDomInfoData {\n    (window as any).parseCount++;\n    if (!('./#[:'.includes(info[0]))) info = `:${info}`;\n    const result: IDomInfoData = {textContent: ''};\n\n    let scope: TInfoType | '' = '';\n    let lastIndex = 0;\n\n    const modScope = (index: number, newScope: TInfoType | '') => {\n        scope = newScope;\n        lastIndex = index;\n    };\n\n    const appendInfo = (index: number, newScope: TInfoType | '') => {\n        // ignore scope in []\n        if (scope === 'attributes' && newScope !== '') return;\n        if (!scope) return modScope(index, newScope);\n        const value = info.substring(lastIndex + 1, index);\n        switch (scope) {\n            case 'className': {\n                if (!result.className) result.className = [];\n                result.className.push(value);\n            }; break;\n            case 'id': result.id = value; break;\n            case 'attributes': {\n                if (!result.attributes) result.attributes = {};\n                const [key, kv] = split(value, '=');\n                result.attributes[key] = kv;\n            }; break;\n            case 'textContent': {\n                result.textContent += value;\n            };break;\n            case 'tagName': {\n                result.tagName = value;\n            };break;\n        }\n        modScope(index, newScope);\n    };\n    const len = info.length;\n    for (let i = 0; i < len; i++) {\n        switch (info[i]) {\n            case '.': appendInfo(i, 'className'); break;\n            case '#': appendInfo(i, 'id'); break;\n            case '[': appendInfo(i, 'attributes'); break;\n            case ']': appendInfo(i, ''); break;\n            case '/':\n                appendInfo(i, 'tagName'); break;\n            case ':':\n                // ! :\u4E2D\u7684\u6240\u6709 : \u90FD\u8BA4\u4E3A\u662F\u6587\u672C\n                if (scope !== 'textContent' as TInfoType | '') { // ? \u8FD9\u91CC\u4E0D\u77E5\u4E3A\u4F55scope\u5C45\u7136\u5224\u5B9A\u4E3A '' \u4E86\n                    appendInfo(i, 'textContent');\n                } break;\n        }\n    }\n    appendInfo(info.length, '');\n    return result;\n}\n\n", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:20:04\n * @Description: Coding something\n */\n\nimport {IComponentBuilder} from '../comp/comp';\nimport {IModelBuilder} from '../controller/model';\nimport {IIfBuilder} from '../controller/if';\nimport {IShowBuilder} from '../controller/show';\nimport {ISwitchBuilder} from '../controller/switch';\nimport {IEventBuilder} from '../event/on';\n// import {batchMountDom} from '../mount';\nimport {IDomInfoData, parseDomInfo} from '../parser/info-parser';\nimport {\n    createReplacement, extractReplacement,\n    parseReplacementToNumber, reactiveTemplate,\n    ReplaceExp, subscribe, transformToReaction, join,\n} from 'alins-reactive';\nimport {IJson, IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {\n    IReactBinding, TReactionItem\n} from 'alins-utils/src/types/react.d';\nimport {\n    IStyleBuilder, IStyleAtoms,\n} from 'alins-utils/src/types/style.d';\nimport {IForBuilder} from '../controller/for';\n\nexport type TElementChild = null | IElementBuilder | IElementBuilder[] | IComponentBuilder | IComponentBuilder[];\n\nexport type TChild = TElementChild |\n    IStyleBuilder | IStyleAtoms |\n    IForBuilder |\n    IIfBuilder | IShowBuilder | IModelBuilder | ISwitchBuilder<any> | TChild[];\n\nexport interface IElement {\n    tag: string;\n    className: string[];\n    id: string;\n    textContent: string;\n    attributes: IJson<string>;\n    children?: TChild[];\n    binding: IReactBinding[];\n    event: IEventBuilder[];\n    domInfo: string;\n    _if?: IIfBuilder;\n    show?: TReactionItem;\n    styles: (IStyleBuilder | IStyleAtoms)[];\n}\n\nexport interface IElementBuilder extends IBuilderParameter {\n    type: 'builder'; // todo comp\n    exe(): IElement;\n}\n\n\nfunction mergeDomInfo (config: IElement, domInfo: IDomInfoData) {\n    // // merge instead of assign\n    // InfoKeys.forEach(key => {\n    //     if (!domInfo[key]) return;\n    //     if (typeof domInfo[key] === 'string') (config[key] as string) += domInfo[key];\n    //     else if (domInfo[key] instanceof Array)\n    //         (config[key] as string[]).push(...(domInfo[key] as string[]));\n    //     else if (typeof domInfo[key] === 'object') Object.assign(config[key], domInfo[key]);\n    // });\n\n    // \u4F18\u5316\u6027\u80FD\n    if (domInfo.className) config.className.push(...domInfo.className);\n    if (domInfo.attributes) Object.assign(config.attributes, domInfo.attributes);\n    if (domInfo.id) config.id = domInfo.id;\n    if (domInfo.textContent) config.textContent += domInfo.textContent;\n}\n\n// const map: Map<string, TFPMemo> = new Map();\n// const cloneNodeCount = 0;\n// const cloneNodeCountNo = 0;\n \n// const div = document.createElement('div');\nexport function transformBuilderToDom (builder: IElementBuilder): HTMLElement {\n    const config = builder.exe(); // ! \u5173\u952E\u4EE3\u7801 \u6267\u884Cbuilder\n    // debugger;\n    // console.count('transformBuilderToDomCount');\n\n    // const str = JSON.stringify(config);\n    // let memo = map.get(str);\n    // if (memo) {\n    //     cloneNodeCount++;\n    //     // console.count('cloneNode');\n    //     const dom = memo.exe(config);\n    //     return dom;\n    // }\n    // cloneNodeCountNo++;\n\n    // memo = createFuncProcessMemo<typeof transformBuilderToDom>();\n    // map.set(str, memo);\n\n    // console.log('transformBuilderToDom', builder, config, config.domInfo);\n    // console.warn('transformBuilderToDom', JSON.stringify(config));\n\n    const dom = document.createElement(config.tag);\n\n    // memo.add(() => dom.cloneNode());\n    // console.log('transformBuilderToDom', config);\n    // if (!dom) dom = div.cloneNode() as HTMLElement;\n    // debugger;\n    // if (!config.binding) debugger;\n    for (let i = 0; i < config.binding.length; i++) {\n        const binding = config.binding[i];\n        switch (binding.context.type) {\n            case 'dom-info': {\n                // \u63D0\u53D6\u8868\u8FBE\u5F0F\u4E2D\u6CA1\u6709binding\u7684\u5C5E\u6027 merge\u5230config\u4E2D\n                const domInfo = applyDomInfoReaction(dom, binding);\n                mergeDomInfo(config, domInfo);\n                // ! binding \u6267\u884C\n                    \n            }; break;\n                // todo other binding types\n        }\n    }\n    \n    if (config.domInfo) mergeDomInfo(config, parseDomInfo(config.domInfo));\n\n    if (config.textContent) {\n        setNodeText(dom, config.textContent);\n        // memo.add(() => {\n        //     const dom = (memo?.last);\n        //     dom.innerText = config.textContent;\n        //     return dom;\n        // });\n    }\n    if (config.className.length > 0) dom.className = config.className.join(' ');\n    if (config.attributes) {\n        for (const k in config.attributes) {\n            dom.setAttribute(k, config.attributes[k]);\n        }\n    }\n    if (config.id) dom.id = config.id;\n\n    if (config.children && config.children.length > 0) {\n        mountChildrenDoms(dom, config.children);\n\n        // memo.add((config: IElement) => {\n        //     // todo \u4F18\u5316\u6B64\u90E8\u5206\u903B\u8F91\n        //     // ? \u662F\u5426\u53EF\u4EE5\u6839\u636Ediv\u6807\u8BB0\u6765\u7F13\u5B58 \u53EF\u4EE5\u6700\u5927\u5316\u7F13\u5B58\u6570\u91CF\n        //     const dom = memo?.last;\n        //     mountChildrenDoms(dom, config.children || []);\n        //     return dom;\n        // });\n    }\n\n    for (let i = 0; i < config.event.length; i++) {\n        config.event[i].exe(dom);\n    };\n\n    config.styles.forEach(style => style.exe(dom));\n\n    // // console.log('dom done', dom.children.length);\n    // // ! \u7F13\u5B58\u8282\u70B9 \u76F4\u63A5clone\u4F7F\u7528 \u53EF\u4EE5\u63D0\u5347\u6027\u80FD\n    // console.log((Memo.funcProcInstance as any).name);\n    // debugger;\n    return dom;\n}\n\nexport function mountChildrenDoms (\n    parent: HTMLElement,\n    children: TChild[]\n) {\n    const frag = document.createDocumentFragment();\n    for (const item of children) {\n        mountSingleChild(parent, frag, item);\n    }\n    parent.appendChild(frag);\n}\n\nfunction mountSingleChild (\n    parent: HTMLElement,\n    frag: DocumentFragment,\n    item: TChild\n) {\n    if (item instanceof Array) {\n        for (const child of item) {\n            mountSingleChild(parent, frag, child);\n        }\n    } else if (item instanceof HTMLElement) {\n        frag.appendChild(item);\n    } else if (item) {\n        switch (item.type) {\n            case 'comp':\n                mountSingleChild(parent, frag, item.exe()); break;\n            case 'builder':\n                frag.appendChild(transformBuilderToDom(item)); break;\n            case 'if':\n            case 'switch':\n                frag.appendChild(item.exe(parent)); break;\n            case 'for':\n            case 'show':\n            case 'model':\n                frag.appendChild(item.exe()); break;\n        }\n        // todo life mounted\n    }\n}\n\nfunction setNodeText (node: HTMLElement | Text, v: string) {\n    if (isInputNode(node)) (node as any).value = v;\n    else node.textContent = v;\n}\n\nfunction isInputNode (node: HTMLElement | Text) {\n    return typeof (node as any).value !== 'undefined' && (node as HTMLElement).tagName !== 'BUTTON';\n}\n\nfunction applyDomInfoReaction (dom: HTMLElement, binding: IReactBinding): IDomInfoData {\n    const {template, reactions} = binding;\n    const replacement = join(template, createReplacement);\n    // const\n    const info = parseDomInfo(replacement);\n\n    const data: IDomInfoData = {};\n\n    if (info.textContent) {\n        const textContent = info.textContent;\n        const results = extractReplacement(textContent);\n        if (results) {\n            if (isInputNode(dom)) {\n                (dom as any).value = reactiveTemplate(textContent, reactions, (content) => {\n                    (dom as any).value = content;\n                }, false);\n            } else {\n                const texts = textContent.split(ReplaceExp);\n                texts.forEach((text, i) => {\n                    if (text) dom.appendChild(document.createTextNode(text));\n                    if (!results[i]) return;\n                    const index = parseReplacementToNumber(results[i]);\n                    const reactionItem = reactions[index];\n                    if (!reactionItem) return;\n                    const reaction = transformToReaction(reactionItem);\n                    // ! \u5173\u952E\u4EE3\u7801\n                    const node = document.createTextNode(\n                        reaction[subscribe]((v) => {\n                            node.textContent = v;\n                        })\n                    );\n                    dom.appendChild(node);\n                    // memo.add((config: IElement) => {\n                    //     const {reactions} = config.binding as any;\n                    //     const newDom = memo?.last;\n                    //     const reaction = reactions[index];\n                    //     // ! \u5173\u952E\u4EE3\u7801\n                    //     const node = document.createTextNode(\n                    //         reaction[subscribe]((v: any) => {node.textContent = v;})\n                    //     );\n                    //     newDom.appendChild(node);\n                    //     return newDom;\n                    // });\n                });\n            }\n        } else {\n            data.textContent = textContent;\n        }\n    }\n\n    if (info.className) {\n        info.className.forEach(name => {\n            if (!data.className) data.className = [];\n            data.className.push(\n                reactiveTemplate(name, reactions, (content, oldContent) => {\n                    dom.classList.replace(oldContent, content);\n                }, true)\n            );\n        });\n    }\n\n    /**\n     * $$1$$: \"1\"\n     * a: \"$$2$$\"\n     * b: \"2\"\n     */\n    if (info.attributes) {\n        for (const k in info.attributes) {\n            let value = '';\n            let key = reactiveTemplate(k, reactions, (content, oldContent) => {\n                dom.removeAttribute(oldContent);\n                dom.setAttribute(content, value);\n                key = content;\n            }, true);\n            value = reactiveTemplate(info.attributes[k], reactions, (content) => {\n                dom.setAttribute(key, content);\n                value = content;\n            });\n            if (!data.attributes) data.attributes = {};\n            data.attributes[key] = value;\n        }\n    }\n\n    if (info.id) {\n        const id = reactiveTemplate(info.id, reactions, (content) => {\n            dom.id = content;\n        });\n        dom.id = id;\n    }\n\n    return data;\n    // console.log(info, dom, binding, replacement, reactions);\n}\n\nexport type IElementOptions = Partial<IElement>\n\nexport function createElement ({\n    tag = '',\n    className = [],\n    id = '',\n    textContent = '',\n    attributes = {},\n    children,\n    binding = [],\n    domInfo = '',\n    event = [],\n    _if,\n    styles = [],\n}: IElementOptions): IElement {\n    return {\n        tag,\n        className,\n        id,\n        textContent,\n        attributes,\n        children,\n        binding,\n        domInfo,\n        event,\n        _if,\n        styles,\n    };\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 16:16:59\n * @Description: Coding something\n */\nimport {TChild, mountChildrenDoms} from './element/transform';\n\nexport function mount (...builders: (string | Element | TChild)[]) {\n    let parent: Element | string | null = builders[0] as any;\n    if (typeof parent === 'string') {\n        parent = document.querySelector(parent);\n        if (!(parent instanceof Element)) throw new Error('Parent is not defined');\n    }\n    \n    if (parent instanceof HTMLElement) {builders.shift();}\n    else parent = document.body;\n    mountChildrenDoms(parent as HTMLElement, builders as TChild[]);\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:31:28\n * @Description: model controller\n */\n\nimport {IBuilderConstructor, TBuilderArg} from '../builder/builder';\nimport {subscribe, transformToReaction} from 'alins-reactive';\nimport {IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {IReactItem} from 'alins-utils/src/types/react.d';\nimport {transformBuilderToDom} from '../element/transform';\n\nexport type TModelArg<T> = IReactItem<T> | (()=>T);\n\nexport interface IModelBuilder extends IBuilderParameter {\n    exe(): HTMLElement;\n    type: 'model';\n}\n\ntype TModelDecorator = 'number' | 'camel';\nexport interface IModelController {\n    <T>(\n        this: IBuilderConstructor,\n        value: TModelArg<T>,\n        ...decorators: TModelDecorator[]\n    ): ((...args: TBuilderArg[]) => IModelBuilder);\n}\n\nexport const modelController: IModelController = function (this: IBuilderConstructor, value, ...decorators) {\n    const react = transformToReaction(value);\n    const constructor = this;\n    return (...args) => {\n        return {\n            exe () {\n                let isInput = false;\n                const builder = constructor.apply(null, args);\n                const dom = transformBuilderToDom(builder) as HTMLInputElement;\n\n                const isCEDom = (dom.contentEditable === 'true');\n\n                const getValue = isCEDom ? () => dom.textContent || '' : () => dom.value || '';\n                const setValue = isCEDom ? (v: any) => {dom.textContent = v;} : (v: string) => {dom.value = v;};\n\n                setValue(react[subscribe]((v) => {\n                    if (isInput) {\n                        isInput = false;\n                        return;\n                    }\n                    setValue(v);\n                }));\n                const triggerChange = (v: any) => {\n                    isInput = true;\n                    if (decorators.length !== 0) {\n                        if (decorators.includes('number')) {\n                            v = parseFloat(v);\n                        } else if (decorators.includes('camel')) {\n                            v = v.toLowerCase();\n                        }\n                    }\n                    (react as IReactItem).value = v;\n                };\n                let isComposite = false;\n                dom.addEventListener('compositionstart', () => {\n                    isComposite = true;\n                });\n                dom.addEventListener('compositionend', () => {\n                    isComposite = false;\n                    triggerChange(getValue());\n                });\n                dom.addEventListener('input', () => {\n                    if (!isComposite)\n                        triggerChange(getValue());\n                });\n                return dom;\n            },\n            type: 'model'\n        };\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:31:28\n * @Description: Coding something\n */\n\nimport {IBuilderConstructor, TBuilderArg} from '../builder/builder';\nimport {IElementBuilder, transformBuilderToDom} from '../element/transform';\nimport {\n    createReactive, index, mergeReact, subscribe\n} from 'alins-reactive';\nimport {IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {IReactObject, IReactWrap, IReactItem} from 'alins-utils/src/types/react.d';\n\n// export interface IForController {\n//     <T>(\n//         list: IReactWrap<T>[],\n//         callback: (item: IReactWrap<T>, index: IReactItem<number>) => IElementBuilder\n//     ): IElementBuilder[];\n// }\n\n// export interface IForCallback<T = any> {\n//     (item: IReactWrap<T>, index?: number): TBuilderArg[];\n// }\n\n// export const forController: IForController = (list, callback) => {\n//     // todo reactive index\n//     console.log('forController', list);\n//     const builders: IElementBuilder[] = [];\n//     for (let i = 0; i < list.length; i++) {\n//         console.log('forController', i, list[i]);\n//         const indexReactive = createReactive(i);\n//         list[i].$index = indexReactive;\n//         const builder = callback(list[i], indexReactive);\n//         builders.push(builder);\n//     }\n\n//     return builders;\n// };\nexport interface IForBuilder extends IBuilderParameter{\n    exe(): DocumentFragment;\n    type: 'for';\n}\n\n\nexport interface IForController {\n    <T>(list: IReactWrap<T>[]):\n        ((fn: IForCallback<T>) => IForBuilder);\n}\n\nexport interface IForCallback<T = any> {\n    (item: IReactWrap<T>, index: IReactItem<number>): TBuilderArg[];\n}\n\nexport const forController: IForController = function (this: IBuilderConstructor, list) {\n    // return (fn) => list.map((item, index) => this.call(null, ...fn(item, index)));\n    // console.count('forController');\n    // console.log('forController', list);\n    return (callback) => {\n        const mount = document.createComment('');\n        const doms: (HTMLElement|null)[] = [];\n        const builders: IElementBuilder[] = [];\n        // ! \u6027\u80FD\u4F18\u5316 \u68C0\u6D4B\u5230\u6CA1\u6709index\u5F15\u7528\u5C31\u4E0D\u521B\u5EFA indexReactive\n        const makeBuilder = (callback.length === 2) ? (i: number, item?: IReactWrap<any>) => {\n            const indexReactive = createReactive(i);\n            if (typeof item === 'undefined') item = list[i];\n            item[index] = indexReactive;\n            return callback(item as any, indexReactive);\n        } : (i: number, item?: IReactWrap<any>) => {\n            if (typeof item === 'undefined') item = list[i];\n            return callback(item as any, undefined as any);\n        };\n        // console.log('callback_tostring', callback.toString());\n        for (let i = 0; i < list.length; i++) {\n            const builder = makeBuilder(i);\n            // builder.unshift(num);\n            // console.log('forController_builder', i, builder);\n            builders.push(this.apply(null, builder));\n        }\n        const p = list as any as IReactObject<any>;\n        p[subscribe]((newValue, oldValue, i) => {\n            // v: reaction\n            console.log(newValue, oldValue, i);\n            const oldIndex = list.indexOf(newValue); // \u4EC5\u4EC5\u662F\u79FB\u52A8\u4E86\u4F4D\u7F6E\u7684\u5143\u7D20\n            if (oldIndex !== -1) {\n                const oldDom = doms[i];\n                doms[i] = doms[oldIndex];\n                doms[oldIndex] = oldDom;\n                newValue[index].value = i;\n            } else {\n                if (typeof newValue === 'undefined') { // remove\n                    doms[i]?.remove();\n                    doms.splice(i, 1);\n                } else {\n                    const builder = this.apply(null, makeBuilder(i, newValue));\n                    const oldDom = doms[i];\n                    if (oldDom) {\n                        mergeReact(oldValue, newValue);\n                    } else {\n                        const dom = transformBuilderToDom(builder);\n                        const after = doms[i + 1];\n                        mount.parentElement?.insertBefore(dom, after || mount);\n                        doms[i] = dom;\n                    }\n                }\n            }\n        });\n        return {\n            exe () {\n                const frag = document.createDocumentFragment();\n                for (const child of builders) {\n                    const dom = transformBuilderToDom(child);\n                    doms.push(dom);\n                    // debugger;\n                    // ! \u5173\u952E\u4EE3\u7801 \u6839\u636Ebuild\u89E3\u6790dom \u6E32\u67D3\u5230\u7236\u5143\u7D20\n                    frag.appendChild(dom);\n                }\n                frag.append(mount);\n                return frag;\n            },\n            type: 'for',\n        };\n    };\n\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-15 19:53:12\n * @Description: Coding something\n */\n/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:31:28\n * @Description: Coding something\n */\n\nimport {IBuilderConstructor, TBuilderArg} from '../builder/builder';\nimport {subscribe, transformToReaction} from 'alins-reactive';\nimport {IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {IReactItem} from 'alins-utils/src/types/react.d';\nimport {IElementBuilder, transformBuilderToDom} from '../element/transform';\n\nexport type TIfArg = IReactItem<boolean> | (()=>boolean);\n\nexport interface IIfBuilder extends IBuilderParameter{\n    elif: IElseIf;\n    else: IElse;\n    exe(parent: HTMLElement): Node|HTMLElement;\n    type: 'if';\n}\n\ninterface IElseIf {\n    (bool: TIfArg): ((...args: TBuilderArg[]) => IIfBuilder);\n}\ninterface IElse{\n    (...args: TBuilderArg[]): IIfBuilder;\n}\n\nexport interface IIfController {\n    (\n        this: IBuilderConstructor,\n        bool: TIfArg,\n    ): ((...args: TBuilderArg[]) => IIfBuilder);\n}\n\n// div.if(num.value > 1)(react`:${bool}`),\n// div.if(bool)(react`:${num.value}`),\n\nexport const ifController: IIfController = function (this: IBuilderConstructor, bool) {\n    const changeList: Function[] = [];\n    const node = document.createComment('');\n\n    let elseBuilder: null | IElementBuilder = null;\n\n    const builders: IElementBuilder[] = [];\n\n    const pushBuilder = (args: TBuilderArg[], isElse = false) => {\n        const builder = this.apply(null, args) as IElementBuilder;\n        if (isElse) elseBuilder = builder;\n        else builders.push(builder);\n    };\n\n    let activeIndex = 0;\n\n    const doms: (Node|HTMLElement) [] = []; // ! \u7F13\u5B58doms\u8282\u70B9\n\n    const getDom = (builder?: IElementBuilder) => {\n        if (!builder) return node;\n        let dom = doms[activeIndex];\n        if (dom) return dom;\n        dom = transformBuilderToDom(builder);\n        doms[activeIndex] = dom;\n        return dom;\n    };\n\n    const exe = (start = 0) => {\n        for (let i = start; i < reactList.length; i++) {\n            if (reactList[i].value === true) {\n                activeIndex = i;\n                return getDom(builders[i]);\n            }\n        }\n        if (elseBuilder) {\n            activeIndex = reactList.length;\n            return getDom(elseBuilder);\n        }\n        activeIndex = -1;\n        return getDom();\n    };\n\n    const reactList: IReactItem<boolean>[] = [];\n\n    const pushReact = (bool: TIfArg) => {\n        const i = reactList.length;\n        const react = transformToReaction(bool);\n        react[subscribe](v => {\n            let dom: HTMLElement | Node | null = null;\n            if (v) {\n                if (i < activeIndex || activeIndex === -1) {\n                    activeIndex = i;\n                    dom = transformBuilderToDom(builders[i]);\n                }\n            } else {\n                dom = exe(activeIndex);\n            }\n            if (dom) changeList.forEach(fn => fn(dom));\n        });\n        reactList.push(react);\n    };\n\n    pushReact(bool);\n    return (...args: TBuilderArg[]) => {\n        pushBuilder(args);\n        return {\n            exe (parent: HTMLElement) {\n                let node = exe();\n                changeList.push((d: Node) => {\n                    if (d === node) return;\n                    parent.insertBefore(d, node);\n                    parent.removeChild(node);\n                    node = d;\n                });\n                return node;\n            },\n            elif (bool) {\n                pushReact(bool);\n                return (...args) => {\n                    pushBuilder(args);\n                    return this;\n                };\n            },\n            else (...args) {\n                pushBuilder(args, true);\n                return this;\n            },\n            type: 'if'\n        } as IIfBuilder;\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-15 19:53:12\n * @Description: Coding something\n */\n/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:31:28\n * @Description: Coding something\n */\n\nimport {IBuilderConstructor, TBuilderArg} from '../builder/builder';\nimport {subscribe, transformToReaction} from 'alins-reactive';\nimport {IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {transformBuilderToDom} from '../element/transform';\nimport {TIfArg} from './if';\n\n\nexport interface IShowBuilder extends IBuilderParameter {\n    exe(): HTMLElement;\n    type: 'show';\n}\n\n\nexport interface IShowController {\n    (\n        this: IBuilderConstructor,\n        bool: TIfArg,\n    ): ((...args: TBuilderArg[]) => IShowBuilder);\n}\n\n// div.if(num.value > 1)(react`:${bool}`),\n// div.if(bool)(react`:${num.value}`),\n\nexport const showController: IShowController = function (this: IBuilderConstructor, bool) {\n    \n    const react = transformToReaction(bool);\n    const constructor = this;\n\n    return (...args) => {\n        return {\n            exe () {\n                const builder = constructor.apply(null, args);\n                const dom = transformBuilderToDom(builder);\n                react[subscribe](v => {\n                    dom.style.display = v ? '' : 'none';\n                });\n                return dom;\n            },\n            type: 'show'\n        };\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-15 19:53:12\n * @Description: Coding something\n */\n/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:31:28\n * @Description: Coding something\n */\n\nimport {IBuilderConstructor, TBuilderArg} from '../builder/builder';\nimport {subscribe, transformToReaction} from 'alins-reactive';\nimport {IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {IReactItem} from 'alins-utils/src/types/react.d';\nimport {IElementBuilder, transformBuilderToDom} from '../element/transform';\n\nexport type TSwitchArg<T> = IReactItem<T> | (()=>T);\n\nexport interface ISwitchBuilder<T> extends IBuilderParameter{\n    case: ICase<T>;\n    default: IDefault<T>;\n    exe(parent: HTMLElement): Node|HTMLElement;\n    type: 'switch';\n}\n\ninterface ICase<T> {\n    (bool: T): ((...args: TBuilderArg[]) => ISwitchBuilder<T>);\n}\ninterface IDefault<T>{\n    (...args: TBuilderArg[]): ISwitchBuilder<T>;\n}\n\nexport interface ISwitchController {\n    <T>(\n        this: IBuilderConstructor,\n        value: TSwitchArg<T>,\n    ): ISwitchBuilder<T>;\n}\n\n// div.if(num.value > 1)(react`:${bool}`),\n// div.if(bool)(react`:${num.value}`),\n\nexport const switchController: ISwitchController = function <T> (this: IBuilderConstructor, value: TSwitchArg<T>) {\n    const defaultValue = Symbol('def');\n    const node = document.createComment('');\n\n    const builders: Map<any, IElementBuilder> = new Map();\n\n    const doms: Map<any, Node|HTMLElement> = new Map(); // ! \u7F13\u5B58doms\u8282\u70B9\n    const getDom = (value: any) => {\n        const builder = builders.get(value) || builders.get(defaultValue);\n        \n        if (!builder) {\n            return node;\n        }\n        let dom = doms.get(builder);\n        if (dom) return dom;\n        dom = transformBuilderToDom(builder);\n        doms.set(builder, dom);\n        return dom;\n    };\n\n    const addBuilder = (args: TBuilderArg[], value: any) => {\n        const builder = this.apply(null, args) as IElementBuilder;\n        builders.set(value, builder);\n    };\n\n    const react = transformToReaction(value);\n\n    return {\n        exe (parent: HTMLElement) {\n            let node = getDom(react.value);\n\n            react[subscribe](v => {\n                const dom = getDom(v);\n                if (dom === node) return;\n                parent.insertBefore(dom, node);\n                parent.removeChild(node);\n                node = dom;\n            });\n            return node;\n        },\n        case (value: any) {\n            return (...args) => {\n                addBuilder(args, value);\n                return this;\n            };\n        },\n        default (...args) {\n            addBuilder(args, defaultValue);\n            return this;\n        },\n        type: 'switch'\n    } as ISwitchBuilder<T>;\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:31:34\n * @Description: Coding something\n */\n\nimport {modelController, IModelController} from './model';\nimport {forController, IForController} from './for';\nimport {ifController, IIfController} from './if';\nimport {IShowController, showController} from './show';\nimport {ISwitchController, switchController} from './switch';\n\nexport interface IControllerBuilder {\n    for: IForController;\n    if: IIfController;\n    show: IShowController;\n    model: IModelController;\n    switch: ISwitchController;\n}\n\nexport const controllers = {\n    for: forController,\n    if: ifController,\n    show: showController,\n    model: modelController,\n    switch: switchController,\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:32:24\n * @Description: Coding something\n */\n\nimport {controllers, IControllerBuilder} from '../controller/controller';\nimport {IEventBuilder} from '../event/on';\nimport {createElement, IElement, IElementBuilder, IElementOptions, TChild} from '../element/transform';\nimport {countBindingValue} from 'alins-reactive';\nimport {IReactBinding, IReactBuilder} from 'alins-utils/src/types/react.d';\n\nexport type TBuilderArg = number | string | IReactBuilder | IEventBuilder | TChild | IBuildFunction; // (IElementBuilder|IElementBuilder[])[];\n\nexport type IBuildFunction = () => TBuilderArg[];\nexport interface IBuilder extends IControllerBuilder, IBuilderConstructor {\n    // todo controller\n}\n\nfunction getTagNameFromDomInfo (domInfo: string) {\n    if (domInfo[0] !== '/') return '';\n    for (let i = 1; i < domInfo.length; i++) {\n        if ('.#[:'.includes(domInfo[i])) return domInfo.substring(1, i);\n    }\n    return domInfo.substring(1);\n}\n\n/**\n * dom builder \u662Fdiv\u7B49\u51FD\u6570\u7684\u8FD4\u56DE\u503C\n * \u5728\u6267\u884Cmount\u7684\u65F6\u5019\u7684\u4F1A\u52A8\u6001\u7684\u6267\u884C \u8FD4\u56DE\u4E00\u4E2A IElement\u5BF9\u8C61\n * \u7136\u540E\u901A\u8FC7 transform \u65B9\u6CD5\u8F6C\u6B63\u771F\u5B9Edom\u8282\u70B9\n */\nfunction elementBuilder (tag: string, data: TBuilderArg[]) {\n    // console.log('elementBuilder', tag, data, JSON.stringify(data));\n    const elementOptions: IElementOptions & {\n        children: TChild[],\n        binding: IReactBinding[],\n    } = {\n        tag,\n        children: [],\n        event: [],\n        binding: [],\n        styles: [],\n        domInfo: ''\n    };\n    for (let i = 0; i < data.length; i++) {\n        const item = data[i];\n        if (typeof item === 'string') {\n            // dom info\n            const tagName = getTagNameFromDomInfo(item);\n            if (tagName) elementOptions.tag = tagName;\n            elementOptions.domInfo += item;\n        } else if (item instanceof Array) {\n            // append children\n            elementOptions.children.push(item);\n        } else if (typeof item === 'object' && item) {\n            switch (item.type) {\n                case 'react':\n                    const binding = item.exe({type: 'dom-info'});\n                    if (binding.template[0][0] === '/') {\n                        const domInfo = countBindingValue(binding);\n                        elementOptions.tag = getTagNameFromDomInfo(domInfo);\n                    }\n                    elementOptions.binding.push(binding); // todo maybe other binding\n                    break;\n                case 'builder':\n                case 'if':\n                case 'show':\n                case 'model':\n                case 'switch':\n                case 'for':\n                case 'comp':\n                    elementOptions.children.push(item); break;\n                case 'on':\n                    elementOptions.event?.push(item); break;\n                case 'style':\n                    elementOptions.styles?.push(item); break;\n                default: console.warn('unkonwn builder', item); break;\n            }\n        } else if (typeof item === 'function') {\n            data.push(...item());\n        }\n    }\n    // console.count('createElement');\n    return createElement(elementOptions);\n};\n\n// export const getBuilderId = (() => {\n//     const map: IJson<number> = {};\n//     return (name: string) => {\n//         if(map)\n//     };\n// })();\n\n\nexport interface IBuilderConstructor extends IControllerBuilder {\n    (...args: TBuilderArg[]): IElementBuilder;\n}\n\nexport function buildFactory (tag: string): IBuilderConstructor {\n    return Object.assign(((...data: TBuilderArg[]) => {\n        // todo exe add context\n        return createBaseBuilder(() => {\n            return elementBuilder(tag, data);\n        });\n    }), controllers);\n}\n\nexport const dom = buildFactory;\n \nexport const div = buildFactory('div');\nexport const span = buildFactory('span');\nexport const input = buildFactory('input');\nexport const button = buildFactory('button');\nexport const img = buildFactory('img');\nexport const a = buildFactory('a');\nexport const i = buildFactory('i');\nexport const text = (v: string) => ':' + v;\n// todo add element\n\nfunction createBaseBuilder (exe: ()=> IElement): IElementBuilder {\n    return {\n        exe,\n        type: 'builder',\n    };\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 08:45:14\n * @Description: Coding something\n */\n\nimport {IJson, IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {IComputedItem} from 'alins-utils/src/types/react.d';\nimport {TChild} from '../element/transform';\nimport {IEvent, IEventFunc} from './event';\nimport {IProp} from './prop';\nimport {ISlot, TSlotElement} from './slot';\n\nexport type TCompArgs = IProp | IEvent | ISlot;\nexport type TCompBuildFunc = () => TCompArgs[];\n\nexport type TCompBuilderArg = IComponent | TCompArgs | TCompBuildFunc;\n\nexport interface IComponentOptions {\n    prop: IJson<IComputedItem>;\n    event: IJson<IEventFunc>;\n    slot: TSlotElement;\n}\nexport interface IComponent {\n    (options: IComponentOptions): TChild;\n}\n\nexport type TCompArg = string; // prop event slot\nexport interface IComponentBuilder extends IBuilderParameter {\n    exe(): TChild;\n    type: 'comp';\n}\nexport interface ICompConstructor{ // extends IControllerBuilder\n    (comp: IComponent, ...args: TCompBuilderArg[]): IComponentBuilder;\n}\n\n// const CompMap: Map<Function, IComponentElement> = new Map(); // \u6216\u8005\u53EF\u4EE5\u4F7F\u7528 func.toString md5\n\nexport const comp: ICompConstructor = (...args) => {\n    // const mapValue = CompMap.get(el);\n    // if (mapValue) return mapValue;\n\n\n    // CompMap.set(el, comp);\n\n    return {\n        exe () {\n            const options: IComponentOptions = {\n                prop: {},\n                event: {},\n                slot: {}\n            };\n            let component: IComponent | null = null;\n            for (let i = 0; i < args.length; i++) {\n                const item = args[i];\n                if (typeof item === 'function') {\n                    if (i === 0) {\n                        component = item as IComponent;\n                    } else {\n                        args.push(...(item as TCompBuildFunc)());\n                    }\n                } else if (item) {\n                    switch (item.type) {\n                        case 'prop': options.prop = item.exe(); break;\n                        case 'event': options.event = item.exe(); break;\n                        case 'slot': options.slot = item.exe(); break;\n                    }\n                }\n            }\n            if (!component) throw new Error('Component not found');\n            return component(options);\n        },\n        type: 'comp',\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-17 21:58:28\n * @Description: Coding something\n */\n\nimport {IJson, IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {computed, isReaction} from 'alins-reactive';\nimport {IComputedItem, TReactionItem} from 'alins-utils/src/types/react.d';\n\nexport interface IProp extends IBuilderParameter {\n    type: 'prop';\n    exe(): IJson<IComputedItem>;\n}\n\nexport  interface IPropConstructor {\n    (prop: IJson<TReactionItem>): IProp;\n}\n\nexport const prop: IPropConstructor = (prop) => {\n    return {\n        type: 'prop',\n        exe () {\n            const data: IJson<IComputedItem> = {};\n            for (const k in prop) {\n                const item = prop[k];\n                (window as any).item = item;\n                const computeTarget = typeof item === 'function' ? item :\n                    (isReaction(item) ? () => item.value : () => item);\n                data[k] = computed(computeTarget);\n            }\n            return data;\n        }\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-17 21:58:28\n * @Description: Coding something\n */\n\nimport {IJson, IBuilderParameter} from 'alins-utils/src/types/common.d';\n\nexport type IEventFunc = (...args: any[]) => void;\n\nexport interface IEvent extends IBuilderParameter {\n    type: 'event';\n    exe(): IJson<IEventFunc>;\n}\n\nexport  interface IEventConstructor {\n    (prop: IJson<IEventFunc>): IEvent;\n}\n\nexport const event: IEventConstructor = (event) => {\n    return {\n        type: 'event',\n        exe () {\n            return event;\n        }\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-17 21:58:28\n * @Description: Coding something\n */\n\nimport {IJson, IBuilderParameter} from 'alins-utils/src/types/common.d';\nimport {TChild} from '../element/transform';\n\nexport type TSlotFunction = (...args: any[]) => TChild;\n\nexport type TSlotElement = IJson<TChild | TSlotFunction> | TChild | TSlotFunction;\n\nexport interface ISlot extends IBuilderParameter {\n    type: 'slot';\n    exe(): TSlotElement;\n}\n\nexport  interface ISlotConstructor {\n    (slot: IJson<TChild | TSlotFunction> | TChild | TSlotFunction): ISlot;\n}\n\nexport const slot: ISlotConstructor = (slot) => {\n    return {\n        type: 'slot',\n        exe: () => slot,\n    };\n};", "/*\n * @Author: tackchen\n * @Date: 2022-10-17 16:33:44\n * @Description: Coding something\n */\n// export type TEventName = keyof HTMLElementEventMap;\n\nimport {IBuilderParameter} from 'alins-utils/src/types/common.d';\n\nexport interface IEventBuilder extends IBuilderParameter {\n    args(...args: any[]): IEventBuilder;\n    exe(dom: HTMLElement): void;\n    type: 'on';\n    name: string;\n}\n\n// prevent\uFF1A\u963B\u6B62\u9ED8\u8BA4\u4E8B\u4EF6\uFF08\u5E38\u7528\uFF09\uFF1B\n// stop\uFF1A\u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1\uFF08\u5E38\u7528\uFF09\uFF1B\n// once\uFF1A\u4E8B\u4EF6\u53EA\u89E6\u53D1\u4E00\u6B21\uFF08\u5E38\u7528\uFF09\uFF1B\n// capture\uFF1A\u4F7F\u7528\u4E8B\u4EF6\u7684\u6355\u83B7\u6A21\u5F0F\uFF1B\n// self\uFF1A\u53EA\u6709event.target\u662F\u5F53\u524D\u64CD\u4F5C\u7684\u5143\u7D20\u65F6\u624D\u89E6\u53D1\u4E8B\u4EF6\uFF1B\ntype TEventDecorator = 'prevent' | 'stop' | 'capture' | 'once' | 'self';\n\nexport function on (\n    name: string,\n    listener: (...args: any[])=> void,\n    ...decorators: TEventDecorator[]\n): IEventBuilder {\n    const eventArgs: any[] = [];\n    return {\n        args (...args) {\n            eventArgs.push(...args);\n            return this;\n        },\n        exe (dom: HTMLElement) {\n            if (decorators.length === 0) {\n                dom.addEventListener(name, (e) => {\n                    listener.apply(dom, [...eventArgs, e]);\n                });\n            } else {\n                const is = (name: TEventDecorator) => decorators.includes(name);\n                const useCapture = is('capture');\n                const handle = (e: Event) => {\n                    if (is('self') && e.target !== dom) return;\n\n                    if (is('stop')) e.stopPropagation();\n                    if (is('prevent')) e.preventDefault();\n                    listener.apply(dom, [...eventArgs, e]);\n                    if (is('once')) dom.removeEventListener(name, handle, useCapture);\n                };\n                dom.addEventListener(name, handle, useCapture);\n            }\n        },\n        type: 'on',\n        name,\n    };\n}\n\n// todo add\nexport const [\n    click,\n    mousedown,\n    mouseup,\n    mousemove,\n] = [\n    'click',\n    'mousedown',\n    'mouseup',\n    'mousemove',\n].map(name => {\n    // todo add event args\n    return (listener: (...args: any[])=> void) => on(name, listener);\n});", "/*\n * @Author: tackchen\n * @Date: 2022-10-22 21:02:32\n * @Description: Coding something\n */\n\nimport {TReactionItem} from 'alins-utils/src/types/react.d';\nimport {reactiveTemplate} from 'alins-reactive';\nimport {IStyleBuilder} from 'alins-utils/src/types/style.d';\n\ntype ICssCBArg = string | IStyleBuilder | ICssCBArg[];\n\nexport interface ICssCallback {\n    (...args: ICssCBArg[]): {\n        style: HTMLStyleElement;\n        mount(selector?: string | HTMLElement): void;\n    };\n}\n\nexport interface ICssConstructor {\n    (selector: string): ICssCallback;\n}\n\nexport const css: ICssConstructor = (selector: string) => {\n    return (...args: ICssCBArg[]) => {\n        const style = document.createElement('style');\n        const {template, reactions} = buildCssFragment(selector, args);\n        let content = '';\n        if (reactions.length > 0) { // \u6709\u54CD\u5E94\u6570\u636E\u9700\u8981\u6E32\u67D3\n            content = reactiveTemplate(template, reactions, (content) => {\n                style.innerText = content;\n            });\n        } else {\n            content = template;\n        }\n        style.innerText = content;\n        return {\n            style,\n            mount (selector = 'head') {\n                let parent: HTMLElement | null;\n                if (typeof selector === 'string') {\n                    parent = document.querySelector(selector);\n                } else {\n                    parent = selector;\n                }\n                if (!parent) throw new Error('Invalid mount target');\n\n                parent.appendChild(style);\n            }\n        };\n    };\n};\n\nfunction buildCssFragment (\n    selector: string,\n    args: ICssCBArg[],\n    path = '',\n    reactions: TReactionItem[] = []\n): {\n    template: string,\n    reactions: TReactionItem[],\n} {\n    const selectorPath = concatSelectorPath(path, selector);\n    let childStyles = '';\n\n    let currentStyle = '';\n\n    for (const item of args) {\n        if (typeof item === 'string') {\n            currentStyle += item + ';';\n        } else if (item instanceof Array) { // \u5B50\u7C7B\n            const result = buildCssFragment(item[0] as string, item.slice(1), selectorPath);\n            childStyles += result.template;\n            reactions.push(...result.reactions);\n        } else if (typeof item === 'object') {\n            // todo reaction style\n            const {scopeReactions, scopeTemplate} = item.generate(reactions.length);\n            currentStyle += scopeTemplate;\n            reactions.push(...scopeReactions);\n        }\n    }\n\n    return {\n        template: `${selectorPath}{${currentStyle}}${childStyles}`,\n        reactions,\n    };\n}\n\nfunction concatSelectorPath (path: string, name: string) {\n    if (name[0] === '&') {\n        return `${path}${name.substring(1)}`;\n    } else {\n        return `${path} ${name}`;\n    }\n}\n", "/*\n * @Author: tackchen\n * @Date: 2022-10-22 21:03:39\n * @Description: Coding something\n */\n\n\nimport {\n    countBindingValue,\n} from 'alins-reactive';\nimport {IReactBuilder, IReactItem} from 'alins-utils/src/types/react.d';\nimport {IJson} from 'alins-utils/src/types/common.d';\nimport {IStyleAtoms, TStyleValue, TUnit, TI} from 'alins-utils/src/types/style.d';\nimport {OnlyNumberAttrs, style} from './style';\n\nconst IMP = 'i';\n\nexport const DefaultUint = 'px';\n\nexport const StyleAtoms: IStyleAtoms = {\n    borderBottom (v: TStyleValue, unit?: TUnit, i?: TI) {\n        return createAtomChild({}).borderBottom(v, unit, i);\n    },\n    width (v: TStyleValue, unit?: TUnit | TI, i?: TI) {\n        return createAtomChild({}).width(v, unit, i);\n    },\n} as any as IStyleAtoms;\n\nexport function createAtomChild (\n    result: IJson<string | (()=>string)> = {}\n): IStyleAtoms {\n    (window as any).xx = result;\n    return {\n        result,\n        borderBottom (v: TStyleValue, unit?: TUnit | TI, i?: TI) {\n            result.borderBottom = transformAtomStyleValue('borderBottom', v, unit, i);\n            console.log(result);\n            return this;\n        },\n        width (v: TStyleValue, unit?: TUnit | TI, i?: TI) {\n            result.width = transformAtomStyleValue('width', v, unit, i);\n            console.log(result);\n            return this;\n        },\n        exe (dom: HTMLElement) {\n            return style(this.result).exe(dom);\n        },\n        type: 'style',\n    } as any;\n};\n\nfunction transformAtomStyleValue (\n    key: string,  v: TStyleValue, unit?: TUnit|TI|'', i?: TI\n): string | (()=>string) {\n\n    if (unit === IMP) {\n        i = IMP;\n        unit = '';\n    }\n    const tail = `${unit || ''}${createCssITail(i)}`;\n\n    const iu = !!unit || OnlyNumberAttrs.includes(key); // ignoreUnit\n\n    if (typeof v === 'number' || typeof v === 'string') {\n        return concatValue(iu, v, tail);\n    } else if ((v as IReactBuilder).type === 'react' ) {\n        return () => concatValue(iu, countBindingValue((v as IReactBuilder).exe({type: 'style'})), tail);\n    } else if (typeof v === 'function') {\n        return () => concatValue(iu, v(), tail);\n    } else {\n        return () => concatValue(iu, (v as IReactItem).value, tail);\n    }\n}\n\nfunction concatValue (iu: boolean, v: string | number, tail: string) {\n    if (iu || typeof v === 'string') return v + tail;\n    return (typeof v === 'number' ? `${v}${DefaultUint}${tail}` : v + tail);\n}\n\nfunction createCssITail (i?: TI) {\n    return i === IMP ? '!important' : '';\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-18 09:52:03\n * @Description: Coding something\n */\n\nimport {\n    isStringTemplateArray, splitTwoPart,\n    subscribeReactBuilder, subscribe, transformToReaction,\n    createReplacement, createTemplateReplacement, reactiveTemplate, ReplaceExp,\n} from 'alins-reactive';\nimport {IReactBuilder, TReactionItem} from 'alins-utils/src/types/react.d';\nimport {IJson} from 'alins-utils/src/types/common.d';\nimport {IStyleAtoms, IStyleBuilder, TStyleReaction} from 'alins-utils/src/types/style.d';\nimport {DefaultUint, StyleAtoms} from './style-atom';\n\nexport interface IStyleConstructor extends IStyleAtoms{\n    (json: IJson<string | number | TStyleReaction>): IStyleBuilder;\n    (ts: TemplateStringsArray, ...reactions: TReactionItem[]): IStyleBuilder;\n    (style: string): IStyleBuilder;\n}\n\nexport const OnlyNumberAttrs = ['lineHeight', 'zIndex', 'opacity', 'flex'];\n\nexport const style: IStyleConstructor = Object.assign((\n    a1: IJson<string | number | TStyleReaction> | TemplateStringsArray | string,\n    ...reactions: TReactionItem[]\n) => {\n    return {\n        // \u8FD4\u56DE\u54CD\u5E94\u6A21\u677F\u548C\u54CD\u5E94\u6570\u636E\n        generate (start = 0) {\n            let scopeTemplate = '';\n            const scopeReactions: TReactionItem[] = [];\n            if (typeof a1 === 'string') {\n                scopeTemplate += a1; // \u9759\u6001style\n            } else if (isStringTemplateArray(a1)) {\n                const template = a1 as any as string[]; // \u9759\u6001style\n                if (reactions.length === 0) scopeTemplate += template[0]; // \u6CA1\u6709\u54CD\u5E94\u6570\u636E\n                else {\n                    scopeTemplate += createTemplateReplacement(template, start);\n                    scopeReactions.push(...reactions);\n                }\n            } else if (typeof a1 === 'object' || a1 !== null) { // json\n                for (const key in a1) {\n                    const value = (a1 as IJson<string | number | TStyleReaction>)[key];\n                    let styleValue = '';\n                    if (typeof value === 'string') { // \u5F53json\u503C\u662F\u7B80\u5355\u7C7B\u578B\n                        styleValue = transformStyleValue(key, value);\n                    } else if ((value as IJson).type === 'react' ) {\n                        // \u5F53json\u503C\u662FIReactBuilder react`1-${xx}`\n                        // \u53C2\u6570\u662FreactBuilder\u7684\u65F6\u5019\u9700\u8981\u5408\u5E76\u4E00\u4E0B reactions\n                        const {template, reactions} = (value as IReactBuilder).exe({\n                            type: 'style',\n                        });\n                        if (reactions.length > 0) {\n                            styleValue = createTemplateReplacement(template, scopeReactions.length);\n                            scopeReactions.push(...reactions);\n                        } else {\n                            styleValue = template.join('');\n                        }\n                    } else {\n                        // \u5F53json\u503C\u662FTReactionItem\n                        const reaction = transformToReaction(value as TReactionItem<number | string>);\n                        styleValue = createReplacement(scopeReactions.length);\n                        scopeReactions.push(reaction);\n                    }\n                    scopeTemplate += `${transformStyleAttr(key)}:${styleValue};`;\n                }\n                // \u4EA4\u7ED9\u5916\u90E8\u5904\u7406\n                return {\n                    scopeTemplate,\n                    scopeReactions\n                };\n            }\n            console.warn('Invalid style arguments');\n            return {scopeTemplate: '', scopeReactions: []};\n        },\n        exe (dom: HTMLElement) {\n            const beforeStyle = dom.getAttribute('style') || '';\n            let newStyle = beforeStyle;\n            if (typeof a1 === 'string') {\n                newStyle += a1; // \u9759\u6001style\n            } else if (isStringTemplateArray(a1)) {\n                const template = a1 as any as string[]; // \u9759\u6001style\n                if (reactions.length === 0) {// \u6CA1\u6709\u54CD\u5E94\u6570\u636E\n                    newStyle += template[0]; // \u9759\u6001style\n                } else {\n                    const templateRep = createTemplateReplacement(template);\n                    const [styles, reactStyles] = parseStyleTemplateToObject(templateRep);\n                    newStyle += styles;\n                    newStyle += reactiveStyle(dom.style as any, reactStyles, reactions);\n                }\n            } else if (typeof a1 === 'object' || a1 !== null) { // json\n                const style = dom.style as any as IJson<string>;\n                for (const key in a1) {\n                    const value = (a1 as IJson<string | number | TStyleReaction>)[key];\n                    let styleValue: string|number = '';\n                    if (typeof value === 'string' || typeof value === 'number') { // \u5F53json\u503C\u662F\u7B80\u5355\u7C7B\u578B\n                        styleValue = transformStyleValue(key, value);\n                    } else if ((value as IJson).type === 'react' ) {\n                        // \u5F53json\u503C\u662FIReactBuilder react`1-${xx}`\n                        styleValue = subscribeReactBuilder(value as IReactBuilder, (content) => {\n                            setDomStyle(style, key, content);\n                        }, 'style');\n                    } else {\n                        // \u5F53json\u503C\u662FTReactionItem\n                        const reaction = transformToReaction(value as TReactionItem<number | string>);\n                        styleValue = reaction[subscribe](v => {\n                            setDomStyle(style, key, v);\n                        });\n                    }\n                    newStyle += `${transformStyleAttr(key)}:${transformStyleValue(key, styleValue)};`;\n                }\n            } else {\n                console.warn('Invalid style arguments');\n            }\n            dom.setAttribute('style', newStyle);\n        },\n        type: 'style' as 'style',\n    };\n}, StyleAtoms);\n\nexport function transformStyleAttr (name: string) {\n    return name.replace(/[A-Z]/g, i => '-' + i.toLowerCase());\n}\n\nexport function transformStyleValue (key: string, v: string|number) {\n    if (typeof v === 'string') return v;\n    return v + (OnlyNumberAttrs.includes(key) ? '' : DefaultUint);\n}\n\n// aaa; aaa$$0$$;\nfunction parseStyleTemplateToObject (templateRep: string): [string, IJson<string>] {\n    const lines = templateRep.split(/[;\\n]/);\n    let styles: string = '';\n    const reactStyles: IJson<string> = {};\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i].trim();\n\n        if (!line) continue;\n        const [key, value] = splitTwoPart(line, ':');\n        if (!value) continue;\n        const styleKey = transformStyleAttr(key);\n        if (ReplaceExp.test(line)) {\n            reactStyles[key] = value;\n        } else {\n            styles += `${styleKey}:${value};`;\n        }\n    }\n    return [styles, reactStyles];\n}\n\nfunction reactiveStyle (style: IJson<string>, styles: IJson<string>, reactions: TReactionItem[]) {\n    let styleStr = '';\n    for (const k in styles) {\n        let value = '';\n        let key = reactiveTemplate(k, reactions, (content, oldContent) => {\n            style[oldContent] = '';\n            setDomStyle(style, content, value);\n            key = content;\n        }, true);\n        value = reactiveTemplate(styles[k], reactions, (content) => {\n            setDomStyle(style, key, content);\n            value = content;\n        });\n        styleStr += concatStyleValue(key, value);\n    }\n    return styleStr;\n}\n\nfunction setDomStyle (style: IJson<string>, key: string, value: number | string) {\n    console.log(key, transformStyleValue(key, value));\n    style[key] = transformStyleValue(key, value);\n}\n\nfunction concatStyleValue (key: string, value: number | string) {\n    return `${transformStyleAttr(key)}:${transformStyleValue(key, value)};`;\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-20 23:41:34\n * @Description: Coding something\n */\nimport {\n    button, div, comp, IComponent,\n    IComponentOptions, click, react\n} from '../alins';\n\nexport const Count: IComponent = () => {\n    // const count = react(0);\n    return comp(Count2);\n};\nexport function Count2 () {\n    const count = react(0);\n    return button(\n        click(() => {count.value++;}),\n        react`:Count deep is ${count}`\n    );\n}\n\n\nexport function CountProps ({prop}: IComponentOptions) {\n    return div(\n        react`:Count is ${prop.count}`\n    );\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-21 10:51:40\n * @Description: Coding something\n */\n\nimport {button, div, click, react} from '../alins';\n\nfunction createItem () {\n    return {\n        a: [\n            ['a1' + Math.random().toString(), 'a2' + Math.random().toString()],\n            ['b1' + Math.random().toString(), 'b2' + Math.random().toString()],\n        ]\n    };\n}\n\nexport function For3 () {\n    const array = [];\n    for (let i = 0; i < 2; i++) {\n        array.push(createItem());\n    }\n    const arrayReact = react(array);\n    // todo \u652F\u6301\u8FD4\u56DE\u6570\u7EC4\n    return [\n        button('add', click(() => arrayReact.push(createItem()))),\n        button('clear', click(() => arrayReact.splice(0, arrayReact.length))),\n        div.for(arrayReact)((item, index) => [\n            div(':xxx', react`${index}`),\n            div.for(item.a)((str, i) => [\n                '.x3', react`.x3-${index}-${i}`,\n                div.for(str)((a, ii) => [\n                    react`${a}-${index}-${i}-${ii}`\n                ])\n            ])\n        ])\n    ];\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-11 07:21:04\n * @Description: Coding something\n */\n\nimport {\n    button, div, i, img, input, span, text,\n    comp, event, prop, slot, click, react\n} from '../alins';\n\n\nfunction ReactiveContent () {\n    const data = react({\n        msg: 'world',\n        value: 100,\n        list: [{a: 1}, {a: 2}]\n    });\n    return div('.reactive',\n        div('.reactive-content', react`hello ${data.msg}`),\n        div(react`.reactive-class.reactive-${data.msg}`),\n        div(react`.reactive-attr[reactive=${data.msg}]`),\n        div('.reactive-css'),\n        input.model(data.msg)('.input'),\n    );\n}\n\nfunction ForDemo () {\n    const data = react({\n        input: 'test',\n        list: [{a: 1}, {a: 2}]\n    });\n    return div('.reactive',\n    // only content\n        div.for(data.list)((item) => ['.class', react`:content ${item.a}`]),\n        div.for(data.list)((item) => [react`.class:content ${item.a}`]),\n        // \u5BB9\u5668\n        div.for(data.list)((item) => [\n            div(\n                span.if(item.name)('.name', i(':xxxx'))\n            ),\n            div('.flex-4-num1-operation',\n                div('.flex-4-num1-play', ':click')\n            ),\n            input.model(item.a)('.input'),\n            input.model(data.input)('.input')\n        ])\n    );\n}\n\nexport function Parent () {\n    return div('.parent',\n        text('Hello World'),\n        span('content'),\n        comp(HelloWorld, prop({\n            value: '11',\n        }), event({\n            test: () => console.log('test event')\n        // }), slot(div('slot'))),\n        }), slot((childProp) => div(react`slot-${childProp}`))),\n        comp(ReactiveContent),\n        comp(ForDemo),\n    );\n}\n\nfunction HelloWorld ({prop, slot, event}: any) {\n    const onClick = () => {\n        console.log('onClick');\n    };\n    const data = react({\n        msg: '1',\n        list: [],\n        src: 'https://shiyix.cn/wx-pay.png'\n    });\n    const switchSrc = () => {\n        data.src = 'https://img0.baidu.com/it/u=3380674861,1672768141&fm=253&fmt=auto&app=138&f=JPEG?w=400&h=400';\n    };\n    return div('.flex-4-num1', click(onClick),\n        span('.flex-4-img', click(event.test),\n            react`Hello ${data.msg} ${prop.value}`, // todo fix\n            img('aa[width=100][src=https://shiyix.cn/wx-pay.png]'),\n            img(react`.item-img[width=100][alt=xxx][lazy=loaded][src=${data.src}]`)\n        ),\n        button('\u5207\u6362\u56FE\u7247', click(switchSrc)),\n        div('test-slot*********'),\n        input.model(data.msg)(),\n        slot(data.msg),\n        div('.flex-4-num1-des'),\n    );\n}\n\nexport function testLife () {\n    return null;\n}\n\n// return `\n// div.flex-4-num1@click{onClick}\n//     @on:hover{onHover}\n//     span.flex-4-img\n//         Hello {ref.msg}{prop.value}\n//         img.item-img[alt=xxx;lazy=loaded;src=https://shiyix.cn/wx-pay.png]\n//     {slot}\n//     div.flex-4-num1-des\n//         div$for{list}.for-item\n//             span$if{$item.name}.name@click{onclick}\n//                 i:textdsa\n//         div.flex-4-num1-operation\n//             div.flex-4-num1-play:click\n//         input$bind{data.a}.input\n// `", "/*\n * @Author: tackchen\n * @Date: 2022-10-23 08:46:52\n * @Description: Coding something\n */\nimport {div, react, css, style} from '../alins';\n\nexport function createCss () {\n    const num = react(30);\n    (window as any).num2 = num;\n\n    const simpleStyle = style({\n        color: '#fff',\n        fontSize: react`${num}px`,\n    });\n\n    return css('.d-form')(\n        // simpleStyle,\n        ['&.aa', simpleStyle],\n        ['[a=xx]',\n            simpleStyle,\n            ['&.aa', simpleStyle],\n            ['.cc', simpleStyle]\n        ],\n    );\n}\n\nexport function StyleComp () {\n    const num = react(30);\n    (window as any).num = num;\n    \n    return [\n        div('d-form.d-form',\n            div('d-form-aa.aa',\n\n            ),\n            div('a=yy[a=yy]',\n                div('cc.cc')\n            ),\n            div('a=xx[a=xx].aa',\n                div('cc.cc')\n            )\n        ),\n        div('111', style('color: red; font-size: 10px')),\n        div('222', style({\n            color: 'red',\n            fontSize: '10px',\n        })),\n        div('333', style({\n            color: 'red',\n            marginTop: react`${num}px`,\n            fontSize: react`${() => num.value}px`\n        })),\n        div('444', style`\n            color: red;\n            marginTop: ${num}px;\n            fontSize: ${() => num.value}px;\n        `),\n        div('555',\n            style.borderBottom(react`${num}px solid #000`)\n                .width(() => num.value + 2)\n        ),\n\n        // div('444',\n        //     style.borderBottom(reactBuilder), // react builder\n        //     style.borderBottom(num), // IReactItem\n        //     style.borderBottom(compute), // IComputedItem\n        //     style.borderBottom(() => num.value + 1, 'px', 'i'), // TComputedFunc\n        //     style.borderBottom(reactBuilder).width(),\n        // )\n        \n    ];\n}", "/*\n * @Author: tackchen\n * @Date: 2022-10-20 23:54:34\n * @Description: Coding something\n */\nimport {button, div, input, click, IReactItem, react} from '../alins';\n\nexport function todoList () {\n    const edit = react('');\n\n    const list = react<{\n        content: string\n    }[]>([]);\n    // const arrr = react({a: [1]});\n    // arrr.a = [1, 2];\n\n    // list[0].content;\n\n    const addItem = () => {\n        // list[0].content = '';\n        // list[0] = {content: edit.value};\n        list.push({content: edit.value});\n        edit.value = '';\n        // list[0].value = 1;\n    };\n    // list[0].content.value = '1';\n    const removeItem = (index: IReactItem) => {\n        list.splice(index.value, 1);\n    };\n\n    // const item = list[0];\n\n    return div(\n        input.model(edit)(),\n        button(':\u63D0\u4EA4', click(addItem)),\n        div('.todo-list', react`.todo-${edit}`,\n            div(':111'),\n            div.for(list)((item, index) => [\n                react('.todo-item:', () => index.value + 1, ':', item.content),\n                // react`.todo-item:${() => index.value + 1}:${item.content}`,\n                button(':\u5220\u9664', click(removeItem).args(index)),\n            ]),\n            div(':222'),\n        ),\n    );\n}", "/*\n * @Author: tackchen\n * @Date: 2022-07-11 17:17:54\n * @Description: Coding something\n */\n\nimport {mount, div, comp, react, button, click, prop} from './alins';\nimport {Count, CountProps} from './samples/count';\nimport {For3} from './samples/for-3';\nimport {Parent, testLife} from './samples/hello-world';\nimport {createCss, StyleComp} from './samples/style-comp';\nimport {todoList} from './samples/todo-list';\n\nconst oo = react({\n    a: {\n        b: 'ab',\n        c: {d: 'acd'}\n    },\n});\n\nmount(\n    div('Hello World'),\n    div('Count------------------'),\n    comp(Count),\n    div('.x0#app',\n        react`value=${oo.a.b}-${oo.a.c.d}`,\n    ),\n    div('todoList-----------'),\n    comp(todoList),\n    div('Parent-----------'),\n    comp(Parent),\n    div('For3-----------'),\n    comp(For3),\n    div('Count-----------'),\n    comp(Count),\n    div('countProps-----------'),\n    div(() => {\n        const count = react(1);\n        return [\n            button('add', (click(() => count.value ++))),\n            comp(CountProps, prop({count})),\n            comp(CountProps, prop({count})),\n        ];\n    }),\n    div('testLife-----------'),\n    comp(testLife),\n    div('StyleComp-----------'),\n    comp(StyleComp),\n);\n\n\ncreateCss().mount();"],
  "mappings": "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",
  "names": []
}
